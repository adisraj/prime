<style>
    .choice-advance-search multiselect .btn-group button.btn.btn-default.dropdown-toggle.waves-effect:focus{
    border-left: 3px solid #f9c10c !important;
    background: white!important;
    outline: none!important;
    margin-left: -3px;
    }
</style>
<div class="container col-lg-12 p-0 p-b-30" data-ng-controller="MTOChoiceController as choiceCtrl" data-auto-scroll>
    <ul style="display:none">
        <li>
            <keybinding on="ctrl+f" invoke="choiceCtrl.focusSearchField()" />
        </li>
    </ul>
    <div ui-view>
        <div data-ng-init="choiceCtrl.setInitialHeight();">
            <!-- Section to show the module header section -->
            <div class="col-lg-12 p-0 rc-module-header-wrapper" style="height: auto;">
                <div class="rc-module-header" style="height: auto;">
                    <div class="col-xs-12 p-0 d-flex align-items-center" style="justify-content: space-between;">
                        <div class="d-flex" style="padding: 0px 10px;box-shadow: 3px 0px 4px -1px #f7f7f7;">
                            <div class="p-relative">
                                <div class="image-module p-absolute top-10">
                                    <img src="./img/sidebar-icons/mto-choice.svg" />
                                </div>
                                <div class="label-module top-10 sub-title-desc-truncate">
                                    <a class="p-l-40" href="javascript:void(0)"
                                        title="{{choiceCtrl.selected_mto.description}}" title-direction="top">MTO Choice
                                        - {{choiceCtrl.selected_mto.description}}</a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex" style="flex: 5;" data-ng-if="choiceCtrl.permissionsMap.view">
                            <div class="d-flex d-flex-v-center p-l-20">

                                <span data-ng-show="!choiceCtrl.groupByField" class="f-12">Loaded
                                    <i class="zmdi zmdi-hourglass-alt"
                                        ng-if="!choiceCtrl.mtoChoiceDataList.length && choiceCtrl.mtoChoiceDataList.length !== 0 "></i>{{ choiceCtrl.mtoChoiceDataList.length}}
                                    of
                                    <i class="zmdi zmdi-hourglass-alt"
                                        ng-if="!choiceCtrl.totalRecordCount && choiceCtrl.totalRecordCount!= 0"></i>{{choiceCtrl.totalRecordCount}}
                                    Records
                                </span>
                            </div>
                        </div>
                        <div class="d-flex p-0" data-ng-if="choiceCtrl.isFilterApplied && choiceCtrl.appliedFilterCount">
                            <button type="button" id="filter_applied" name="filter_applied" class="hidden-sm visible-md visible-lg bg-none border-none"
                                data-toggle="collapse" data-target="#advanced-search" data-ng-disabled="(
                                    (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                    (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                )"
                                data-ng-click="choiceCtrl.showAdvancedFilter(true);">
                                <span class="c-red m-t-10">
                                    <i class="fa fa-filter p-r-5"></i>{{choiceCtrl.appliedFilterCount}} Filter(s) Applied
                                </span>
                            </button>
                            <button type="button" class="hidden-lg hidden-md visible-sm bg-none border-none"
                                data-toggle="collapse" data-target="#advanced-search" data-ng-disabled="(
                                    (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                    (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                )"
                                data-ng-click="choiceCtrl.showAdvancedFilter(true);">
                                <span class="c-red m-t-10">
                                    <i class="fa fa-filter p-r-5"></i>{{choiceCtrl.appliedFilterCount}}
                                </span>
                            </button>
                            <button type="button" id="reset_btn" name="reset_btn" class="hidden-sm bg-none border-none"
                                data-ng-click="choiceCtrl.resetFilters();" data-ng-disabled="(
                                    (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                    (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                )">
                                <span class="text-primary m-t-10 m-l-10">
                                    <i class="fa fa-undo f-12 p-r-5" aria-hidden="true"></i>Reset Filters
                                </span>
                            </button>
                        </div>
                        <div class="d-flex">
                            <div id="navbar" class="navbar-collapse collapse">
                                <ul class="nav navbar-nav navbar-right">
                                    <li data-ng-if="choiceCtrl.mtoChoiceDataList.length > 0 && choiceCtrl.permissionsMap.view">
                                        <a class="d-flex">
                                            <div class="group-by-section-mto-choice-maintain tableheader-btn"
                                                ng-init="choiceCtrl.sortBy = choiceCtrl.sortByField !== 'none' ? choiceCtrl.sortByField : sortableFields[0].value"
                                                style="width: 180px;">
                                                <select class="form-control select-component input-sm"
                                                    ng-options="each.value as each.field for each in sortableFields"
                                                    ng-model="choiceCtrl.sortBy"
                                                    ng-change="choiceCtrl.sortByField=choiceCtrl.sortBy; choiceCtrl.sortByOrder='asc'; choiceCtrl.isGroupByApplied ? choiceCtrl.groupByData(choiceCtrl.groupByField) : choiceCtrl.reload(); choiceCtrl.scrollToPosition(0, 0);"
                                                    data-ng-disabled="(
                                                        (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                        (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                    )">
                                                </select>
                                            </div>
                                            <div class="tableheader-btn"
                                                ng-if="choiceCtrl.sortByOrder==='asc' && choiceCtrl.sortBy !== 'none' && choiceCtrl.sortBy !== '' && choiceCtrl.isLoaded"
                                                data-ng-click="choiceCtrl.sortByOrder = 'desc'; choiceCtrl.isGroupByApplied ? choiceCtrl.groupByData(choiceCtrl.groupByField) : choiceCtrl.reload(); choiceCtrl.scrollToPosition(0, 0);">
                                                <span>
                                                    <i class="m-t-5 zmdi zmdi-long-arrow-down zmdi-hc-fw f-700 f-20"
                                                        style="color: firebrick;"></i>
                                                </span>
                                            </div>
                                            <div class="tableheader-btn"
                                                ng-if="choiceCtrl.sortByOrder==='desc' && choiceCtrl.sortBy !== 'none' && choiceCtrl.sortBy !== '' && choiceCtrl.isLoaded"
                                                data-ng-click="choiceCtrl.sortByOrder = 'asc'; choiceCtrl.isGroupByApplied ? choiceCtrl.groupByData(choiceCtrl.groupByField) : choiceCtrl.reload(); choiceCtrl.scrollToPosition(0, 0);">
                                                <span>
                                                    <i class="m-t-5 zmdi zmdi-long-arrow-up zmdi-hc-fw f-700 f-20"
                                                        style="color: firebrick;"></i>
                                                </span>
                                            </div>
                                            <!-- ng-if consists condition for choiceCtrl.recordsCount is true - couse, when choiceCtrl.recordsCount is false there is another loading symbol -->
                                            <span class="cursor-not-allowed"
                                                ng-if="!choiceCtrl.isLoaded && choiceCtrl.recordsCount">
                                                <img src="./img/loading-circle.gif" style="height: 30px;width: 30px;" />
                                            </span>
                                        </a>
                                    </li>
                                    <li data-ng-if="choiceCtrl.permissionsMap.view">
                                        <a>
                                            <div class="group-by-section-mto-choice-maintain tableheader-btn"
                                                ng-if="choiceCtrl.mtoChoiceDataList.length > 0" style="width: 180px;">
                                                <select class="form-control select-component input-sm"
                                                    ng-model="choiceCtrl.groupByField"
                                                    ng-change="choiceCtrl.groupByData(choiceCtrl.groupByField);"
                                                    data-ng-disabled="(
                                                        (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                        (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                    )"
                                                    ng-options="each.prefix as each.name for each in choiceCtrl.choiceGroupByDropdown|filter:{prefix:'!description'}|filter:{prefix:'!next_effective_date'}|filter:{prefix:'!effective_date'}">
                                                </select>
                                            </div>
                                        </a>

                                    </li>

                                    <li class="non-collapsed-link" data-ng-if="choiceCtrl.permissionsMap.view">
                                        <a>
                                            <button class="btn search-box-advanced-btn btn-sm"
                                                title="Search will be performed at the server." data-toggle="collapse"
                                                data-target="#advanced-search"  data-ng-disabled="(
                                                    (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                    (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                )"
                                                data-ng-click="choiceCtrl.showAdvancedFilter(true);">Search</button>
                                        </a>
                                    </li>


                                    <li class="non-collapsed-link" data-ng-if="choiceCtrl.permissionsMap.view">
                                        <a>
                                            <button type="button" data-ng-click="choiceCtrl.reloadChoiceCountAndList(true);"
                                                class="btn-primal btn-block waves-effect"
                                                data-ng-disabled="(
                                                    (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                    (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                )">
                                                <span class="f-700 ng-binding">Refresh</span>
                                            </button>
                                        </a>
                                    </li>


                                    <li class="non-collapsed-link">
                                        <a data-ui-sref="common.prime.mtooptions">
                                            <button type="button" class="btn btn-cancel waves-effect f-700">Go
                                                Back</button>
                                        </a>
                                    </li>


                                    <li class="m-r-10 non-collapsed-link">
                                        <a>
                                            <button type="button" class="btn btn-success f-700 waves-effect"
                                                data-ui-sref="common.prime.mtooptions.mtochoices.new"
                                                data-ng-disabled="disableActions || !choiceCtrl.permissionsMap.create">
                                                <span title="{{!choiceCtrl.permissionsMap.create ? 'Access denied' : ''}}">Create
                                                    MTO Choice</span>
                                            </button>
                                        </a>
                                    </li>
                                    <li class="dropdown collapsed-link" uib-dropdown>
                                        <a uib-dropdown-toggle class="full-height" href="">
                                            <i class="tm-icon zmdi zmdi-more-vert f-25"></i>
                                        </a>
                                        <ul class="dropdown-menu dm-icon pull-right" style="width:200px;">
                                            <li class="cursor-pointer">
                                                <button style="padding: 8px 20px" class="restricted-btn"
                                                    title="{{!choiceCtrl.permissionsMap.create ? 'Access denied' : ''}}"
                                                    data-ng-disabled="disableActions || !choiceCtrl.permissionsMap.create"
                                                    data-ng-class="{'opacity50' : !choiceCtrl.permissionsMap.create}"
                                                    data-ui-sref="common.prime.mtooptions.mtochoices.new">
                                                    <i class="zmdi zmdi-plus text-success f-17 m-r-15"></i> Create MTO
                                                    Choice
                                                </button>
                                            </li>
                                            <li class="cursor-pointer">
                                                <a data-ui-sref="common.prime.mtooptions">
                                                    <i class="zmdi zmdi-long-arrow-left"></i> Go Back
                                                </a>
                                            </li>
                                            <li class="cursor-pointer"
                                                ng-if="choiceCtrl.mtoChoiceDataList.length > 0 && choiceCtrl.permissionsMap.view">
                                                <a data-ng-click="choiceCtrl.reloadChoiceCountAndList(true);"
                                                    class="btn-block waves-effect"
                                                    data-ng-disabled="(
                                                        (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                        (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                    )" href="">
                                                    <i class="zmdi zmdi-refresh text-warning"></i> Refresh</a>
                                            </li>
                                            <li class="cursor-pointer" data-ng-if="choiceCtrl.permissionsMap.view">
                                                <a data-toggle="collapse" data-target="#advanced-search"
                                                    data-ng-disabled="(
                                                        (!choiceCtrl.isGroupByApplied && !choiceCtrl.isLoaded) ||
                                                        (choiceCtrl.isGroupByApplied && !choiceCtrl.isGroupHeader)
                                                    )"
                                                    data-ng-click="choiceCtrl.showAdvancedFilter(true);">
                                                    <i class="zmdi zmdi-search"></i> Search
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Advanced search panel start -->
                    <div class="col-xs-12 collapse" style="height: auto;" id="advanced-search">
                        <div class="col-xs-12 p-0 " style="height: auto;">
                            <div class="col-xs-12 p-0 filter-search-body p-10">
                                <div class="col-xs-12 filter-search-header">
                                    <span>Advanced Search</span>
                                    <span class="zmdi zmdi-close c-white cursor-pointer f-19 pull-right p-r-5"
                                        data-ng-click="choiceCtrl.showAdvancedFilter(true);"></span>
                                </div>
                                <div class="col-xs-12 filter-search-content">
                                    <ng-form class="choice-advance-search" name="choiceCtrl.mto_choice_filter_from" role="form"
                                        novalidate="novalidate">
                                        <div class="col-xs-6" ng-if="choiceCtrl.isResetFilter===false && is_collection">
                                            <div class="form-group">
                                                <label>Collection</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="choiceCtrl.filters.collectionIds"
                                                    options="collection.collection_id as collection.collection for collection in choiceCtrl.allCollections"
                                                    select-limit="100" header="Select Collection"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':choiceCtrl.filters.collectionIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="choiceCtrl.isResetFilter===false && is_family">
                                            <div class="form-group">
                                                <label>Family</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="choiceCtrl.filters.familyIds"
                                                    options="family.family_id as family.family for family in choiceCtrl.allFamilies"
                                                    select-limit="100" header="Select Family"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':choiceCtrl.filters.familyIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="choiceCtrl.isResetFilter===false && is_price">
                                            <div class="form-group">
                                                <label>Price Group</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="choiceCtrl.filters.priceGroupIds"
                                                    options="group.price_group_id as group.price_group for group in choiceCtrl.allPriceGroups"
                                                    select-limit="100" header="Select Price Group"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':choiceCtrl.filters.priceGroupIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="choiceCtrl.isResetFilter===false">
                                            <div class="form-group">
                                                <label>Current Status</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="choiceCtrl.filters.currentStatusIds"
                                                    options="status.code as status.description for status in statuses"
                                                    select-limit="100" header="Select Current Status"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':choiceCtrl.filters.currentStatusIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="choiceCtrl.isResetFilter===false">
                                            <div class="form-group">
                                                <label>Next Status</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="choiceCtrl.filters.nextStatusIds"
                                                    options="status.code as status.description for status in next_statuses"
                                                    select-limit="100" header="Select Next Status"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':choiceCtrl.filters.nextStatusIds.length>0}">
                                            </div>
                                        </div>
                                    </ng-form>
                                </div>
                            </div>
                            <div class="col-xs-12 m-b-10">
                                <div class="pull-left text-danger" data-ng-if="!choiceCtrl.applyFilterSuccess">
                                    {{choiceCtrl.applyFilterMessage}}</div>
                                <div class="m-b-0 pull-left alert alert-success alert-dismissable p-b-5 p-t-5"
                                    data-ng-show="choiceCtrl.message && choiceCtrl.isFilterApplied">
                                    <button type="button" class="close" data-ng-click="choiceCtrl.message = null"
                                        aria-hidden="true">&times;</button>{{choiceCtrl.message}}
                                </div>
                                <div class="m-b-0 pull-left alert alert-success alert-dismissable p-b-5 p-t-5"
                                    data-ng-show="choiceCtrl.resetMessage">
                                    <button type="button" class="close" data-ng-click="choiceCtrl.resetMessage = null"
                                        aria-hidden="true">&times;</button>{{choiceCtrl.resetMessage}}
                                </div>
                                <div class="ipad-advance-search pull-right">
                                    <span class="f-300 text-info m-r-5">[ You can expect some delay as the advanced
                                        search will be performed on the server side.
                                        ]
                                    </span>
                                    <span class="c-red m-r-5"
                                        data-ng-if="choiceCtrl.isFilterApplied && choiceCtrl.appliedFilterCount"> <i
                                            class="fa fa-filter p-r-5"></i>{{choiceCtrl.appliedFilterCount}} Filter(s)
                                        Applied </span>
                                    <span class="m-r-5"
                                        data-ng-if="!choiceCtrl.isFilterApplied || !choiceCtrl.appliedFilterCount">
                                        <i class="fa fa-filter p-r-5"></i> Not applied</span>
                                    <button type="button" class="btn-primary btn tabfocus-btn hidden-sm "
                                        id="filter_attribute_btn"
                                        ng-click="choiceCtrl.applyFilters(); choiceCtrl.scrollToPosition(0, 0);"
                                        ng-model-options="{debounce:3000}" data-ng-disabled="choiceCtrl.isRefreshing">
                                        <strong>{{choiceCtrl.applyFiltersBtnLabel}}</strong>
                                    </button>
                                    <button type="button" class="btn btn-cancel tabfocus-btn hidden-sm"
                                        id="vendor_filter_reset_btn"
                                        ng-click="choiceCtrl.resetFilters(-1); choiceCtrl.scrollToPosition(0, 0);"
                                        data-ng-disabled="choiceCtrl.isRefreshing">
                                        <strong>Reset Filters</strong>
                                    </button>
                                    <div class="hidden-lg hidden-md m-t-10">
                                        <button type="button" class="btn-primary btn tabfocus-btn"
                                            id="filter_attribute_btn"
                                            ng-click="choiceCtrl.applyFilters(); choiceCtrl.scrollToPosition(0, 0);"
                                            ng-model-options="{debounce:3000}"
                                            data-ng-disabled="choiceCtrl.isRefreshing">
                                            <strong>{{choiceCtrl.applyFiltersBtnLabel}}</strong>
                                        </button>
                                        <button type="button" class="btn btn-cancel tabfocus-btn"
                                            id="vendor_filter_reset_btn"
                                            ng-click="choiceCtrl.resetFilters(-1); choiceCtrl.scrollToPosition(0, 0);"
                                            data-ng-disabled="choiceCtrl.isRefreshing">
                                            <strong>Reset Filters</strong>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ./Advanced Search panel -->
                </div>
            </div>


            <div class="col-lg-12 text-center module-content"
                data-ng-if="!choiceCtrl.recordsCount  && !choiceCtrl.isLoaded">
                <div class="m-t-25">
                    <span class="f-17 f-700 c-black">Loading</span>
                    <span class="f-700" style="letter-spacing: 3px;">....</span>
                </div>
            </div>
            <div class="col-xs-12 p-0 module-content"
                data-ng-if="choiceCtrl.recordsCount && choiceCtrl.recordsCount !== 0">
                <div class="col-lg-12 col-xs-12 p-0" data-ng-if="choiceCtrl.permissionsMap.view">
                    <div class="col-xs-12 p-0"
                        data-ng-class="choiceCtrl.groupByField.length>0 ? 'p-r-25 col-xs-12':'col-lg-12'">

                    </div>
                    <div class="col-xs-12" data-ng-if="choiceCtrl.disableActions">
                        <span class="pull-right text-danger blinker">* Configuration status should be "Active" to create
                            & maintain entities.</span>
                    </div>

                    <!-- MTO Choice list when group by is not applied - START -->
                    <div class="col-lg-12 col-xs-12 rcpscrollbar p-0 o-auto m-t-10 pageHeight"
                        data-ng-if="!choiceCtrl.groupByField">
                        <div class="col-md-6 col-sm-12 col-xs-12 m-b-10"
                            ng-repeat="mtoChoice in choiceCtrl.mtoChoiceDataList">
                            <div class="col-xs-12 p-0">
                                <div ios-dblclick="choiceCtrl.updateMTOChoice(mtoChoice)">
                                    <div class="d-flex update-process-overlay"
                                        data-ng-show="mtoChoice.isShowUpdateProcessing">
                                        <img class="m-auto" src="./img/loading.gif" alt=""
                                            style="width:100px;height:100px;">
                                    </div>
                                    <div class="col-xs-12 main-card box p-0">
                                        <div class="col-xs-12 header-section"
                                            ng-class="{'status-active f-500':mtoChoice.status==='Active','status-pending-active f-300':mtoChoice.status==='Pending Active', 'status-inactive f-300':mtoChoice.status==='Inactive','status-pending-inactive f-300':mtoChoice.status==='Pending Inactive','hightlight-activehistory':mtoChoice.showhistory === true || mtoChoice.id == $stateParams.id}">
                                            <span class="text-overflow-desc-auto"
                                                title="{{mtoChoice.choice_description}}">{{mtoChoice.choice_description}}
                                            </span>
                                            <div class="pull-right d-flex align-items-center">
                                                <img class="p-r-5" data-ng-if="mtoChoice.isLoadingClone"
                                                    src="./img/loader.gif" alt="Loading" height="25px" />
                                                <a class="cursor-pointer m-r-5"
                                                    data-ng-click="choiceCtrl.showHistoryDetails(mtoChoice);">
                                                    <span class="f-16 fa fa-history c-gray" title="History"
                                                        title-direction="top-left" fixed-position="true"></span>
                                                </a>
                                                <a class="cursor-not-allowed clone-not-allowed m-r-5"
                                                    data-ng-if="!choiceCtrl.isCloneAllowed" rc-popover
                                                    popover-title="Cloning feature is disabled"
                                                    popover-content="No access for clone. Enable access to clone MTO Choice."
                                                    popover-trigger="hover" popover-placement="bottom">
                                                    <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                </a>
                                                <a class="cursor-not-allowed clone-not-allowed m-r-5"
                                                    data-ng-if="choiceCtrl.isCloneAllowed && (mtoChoice.choice_description.includes('clone') || mtoChoice.choice_description.includes('Clone'))"
                                                    rc-popover popover-title="Cloning is disabled for this MTO Choice"
                                                    popover-content="Have same identity as the cloned parent MTO Choice, to enable cloning change any master properties of this entity."
                                                    popover-trigger="hover" popover-placement="bottom">
                                                    <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                </a>
                                                <a class="cursor-pointer"
                                                    data-ng-if="choiceCtrl.isCloneAllowed && !(mtoChoice.choice_description.includes('clone') || mtoChoice.choice_description.includes('Clone'))"
                                                    data-ng-click="choiceCtrl.goToClonePanel(mtoChoice)">
                                                    <span class="zmdi zmdi-copy zmdi-hc-fw f-19"
                                                        style="color: #6e6e6e;margin-right: 4px;" title="Clone"
                                                        title-direction="top-left" fixed-position="true"></span>
                                                </a>
                                                <button class="restricted-btn p-0"
                                                    ng-click="showMetaData(choiceCtrl.entityInformation,mtoChoice,choiceCtrl.permissionsMap);"
                                                    data-ng-disabled="!choiceCtrl.permissionsMap.drop">
                                                    <span class="zmdi zmdi-cloud-outline zmdi-hc-fw f-19 c-gray"
                                                        data-ng-if="choiceCtrl.permissionsMap.drop"
                                                        title="Click here to manage documents" title-direction="top"
                                                        fixed-position="true"></span>
                                                    <span class="zmdi zmdi-cloud-off zmdi-hc-fw f-19 c-gray"
                                                        data-ng-if="!choiceCtrl.permissionsMap.drop" title="Access denied"
                                                        title-direction="top" fixed-position="true"></span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 content-section">
                                            <div class="col-xs-12 p-0">
                                                <div class="col-xs-3 p-0 d-flex">
                                                    <img check-image
                                                        class="img-responsive card-image m-auto cursor-pointer"
                                                        image-name="mto-choice.svg"
                                                        data-ng-click="mtoChoice.thumbnail?choiceCtrl.previewDatalake(mtoChoice,'cover_image'):''"
                                                        ng-src="{{mtoChoice.thumbnail}}" />
                                                </div>
                                                <div class="col-xs-9 p-0" style="max-height:180px;overflow:auto;">
                                                    <div class="col-sm-6 col-xs-12 p-0 m-b-10">
                                                        <div class="col-xs-12 p-0" ng-if="is_collection">
                                                            <label class="rclabel m-l-10">Collection :</label>
                                                            <label data-ng-show="mtoChoice.collection"
                                                                class="rclabel m-l-10 c-gray"
                                                                title="{{mtoChoice.collection}}">{{mtoChoice.collection | truncate :25}}</label>
                                                            <label data-ng-show="!mtoChoice.collection"
                                                                class="rclabel m-l-10 c-gray"
                                                                title="{{mtoChoice.collection}}">N/A</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0" ng-if="is_family">
                                                            <label class="rclabel m-l-10">Family :</label>
                                                            <label data-ng-show="mtoChoice.family" class="c-gray m-l-10"
                                                                title="{{mtoChoice.family}}">{{mtoChoice.family | truncate :25}}</label>
                                                            <label data-ng-show="!mtoChoice.family"
                                                                class="c-gray m-l-10"
                                                                title="{{mtoChoice.family}}">N/A</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0" ng-if="is_price">
                                                            <label class="rclabel m-l-10">Price Group :</label>
                                                            <label data-ng-show="mtoChoice.price_group"
                                                                class="c-gray m-l-10"
                                                                title="{{mtoChoice.price_group}}">{{mtoChoice.price_group | truncate :25}}</label>
                                                            <label data-ng-show="!mtoChoice.price_group"
                                                                class="c-gray m-l-10"
                                                                title="{{mtoChoice.price_group}}">N/A</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Status :</label>
                                                            <label class="rclabel m-l-10"
                                                                ng-class="{'text-success f-500': mtoChoice.status==='Active' , 'text-warning f-300': mtoChoice.status ==='Pending Active', 'text-primary f-300': mtoChoice.status ==='Inactive','text-info f-300': mtoChoice.status==='Pending Inactive'}">{{mtoChoice.status}}</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6 col-xs-12"
                                                        style="border-left: 1px solid #ececec;">
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Next Status :</label>
                                                            <label
                                                                class="rclabel m-l-10 c-gray">{{mtoChoice.next_status_value}}</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Next Effective Date :</label>
                                                            <label data-ng-show="mtoChoice.next_status_value !== 'None'"
                                                                class="c-gray m-l-10">
                                                                {{mtoChoice.next_effective_date | FormatDate}}
                                                            </label>
                                                            <label data-ng-show="mtoChoice.next_status_value === 'None'"
                                                                class="c-gray m-l-10">
                                                                N/A
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Edit Mto choice Icon-->
                                            <div class="col-xs-12 m-t-5 text-center d-flex"
                                                style="justify-content:space-between;align-items:center;">
                                                <div class="cursor-pointer d-flex" style="align-items:flex-end;">
                                                    <button class="f-14 restricted-btn text-primary"
                                                        data-ng-click="choiceCtrl.updateMTOChoice(mtoChoice);"
                                                        data-ng-disabled="!choiceCtrl.permissionsMap.update"
                                                        data-ng-class="{'opacity50' : !choiceCtrl.permissionsMap.update}">
                                                        <span class="f-13"
                                                            title="{{!choiceCtrl.permissionsMap.update ? 'Access denied' : ''}}"
                                                            title-direction="top"><i class="fa fa-edit m-r-5"></i>
                                                            Edit MTO Choice</span>
                                                    </button>
                                                </div>
                                            </div>
                                            <!-- Edit Mto choice Icon-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 text-center m-t-25 m-b-30" data-ng-if="choiceCtrl.isLoading">
                            <span class="f-17 f-700 c-black">Loading</span>
                            <span class="f-700" style="letter-spacing: 3px;">
                                <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                <span>
                        </div>
                        <div
                            ng-if="choiceCtrl.availableChoiceCount > 0 && !choiceCtrl.isLoading && !choiceCtrl.isGroup">
                            <div class="col-lg-12 col-md-12 aligncenter p-t-10 m-b-10">
                                <button class="btn btn-sm btn-inverse"
                                    data-ng-click="choiceCtrl.loadMoreMtoChoice()">Load Remaining
                                    {{choiceCtrl.availableChoiceCount}} Records</button>
                            </div>
                        </div>
                    </div>
                    <!-- MTO Choice list when group by is not applied - END -->

                    <!-- MTO Choice list when group by is applied - START-->
                    <div class="col-lg-12 col-xs-12 rcpscrollbar p-0 o-auto m-t-15 pageHeight"
                        data-ng-if="choiceCtrl.groupByField">
                        <d-expand-collapse>
                            <div class="col-lg-12 text-center m-t-25 m-b-30" data-ng-if="!choiceCtrl.isGroupHeader">
                                <span class="f-17 f-700 c-black">Loading</span>
                                <span class="f-700" style="letter-spacing: 3px;">
                                    <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                </span>
                            </div>
                            <div ng-repeat="choiceGroup in choiceCtrl.groupChoices"
                                data-ng-if="choiceCtrl.isGroupHeader === true && choiceGroup.selected === 1">
                                <div class="col-xs-12"
                                    data-ng-click="choiceCtrl.showMtoChoiceData(choiceCtrl.groupByField,choiceGroup)">
                                    <div class="col-xs-12 card-group-header" data-ng-click="toggleCollapse($event);">
                                        <span data-ng-if="choiceCtrl.groupByField.includes('effective_date')">
                                            {{choiceGroup[choiceCtrl.groupByField] | FormatDate}}
                                            <span class="zmdi-hc-fw">({{choiceGroup.count}})</span>
                                        </span>
                                        <span data-ng-if="!choiceCtrl.groupByField.includes('effective_date')">
                                            {{choiceGroup[choiceCtrl.groupByField]}} ({{choiceGroup.count}})
                                        </span>
                                        <div id="{{$index}}-groupHeaderIcon"
                                            data-ng-init="initGroupHeader('{{$index}}-groupHeaderIcon',choiceGroup)"
                                            class="pull-right zmdi inline-block"></div>
                                    </div>
                                </div>
                                <div class="col-xs-12 p-0 expand-collapse-me"
                                    data-ng-class="{'d-none':!choiceGroup.expanded}" data-ng-if="choiceGroup.choices">
                                    <div class="col-xs-12 m-t-5 m-b-5">
                                        <span data-ng-show="choiceCtrl.groupByField">{{ choiceGroup.choices.length}} of
                                            {{choiceGroup.count}} Records found </span>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-12 m-b-10"
                                        data-ng-repeat="mtoChoice in choiceGroup.choices"
                                        ng-dblclick="choiceCtrl.updateMTOChoice(mtoChoice)">
                                        <div class="d-flex update-process-overlay"
                                            data-ng-show="mtoChoice.isShowUpdateProcessing">
                                            <img class="m-auto" src="./img/loading.gif" alt=""
                                                style="width:100px;height:100px;">
                                        </div>
                                        <div class="col-xs-12 main-card box p-0">
                                            <div class="col-xs-12 header-section"
                                                ng-class="{'status-active f-500':mtoChoice.status==='Active','status-pending-active f-300':mtoChoice.status==='Pending Active', 'status-inactive f-300':mtoChoice.status==='Inactive','status-pending-inactive f-300':mtoChoice.status==='Pending Inactive','hightlight-activehistory':mtoChoice.showhistory === true || mtoChoice.id == $stateParams.id}">
                                                <span class="text-overflow-desc-auto"
                                                    title="{{mtoChoice.choice_description}}"
                                                    style="color: #393e52;font-weight: 500;">{{mtoChoice.choice_description}}
                                                </span>
                                                <div class="pull-right d-flex align-items-center">
                                                    <a class="cursor-pointer m-r-5"
                                                        data-ng-click="choiceCtrl.showHistoryDetails(mtoChoice);">
                                                        <span class="f-16 fa fa-history c-gray" title="History"
                                                            title-direction="top-left" fixed-position="true"></span>
                                                    </a>
                                                    <a class="cursor-not-allowed clone-not-allowed m-r-5"
                                                        data-ng-if="!choiceCtrl.isCloneAllowed" rc-popover
                                                        popover-title="Cloning feature is disabled"
                                                        popover-content="No access for clone. Enable access to clone MTO Choice."
                                                        popover-trigger="hover" popover-placement="bottom">
                                                        <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                    </a>
                                                    <a class="cursor-not-allowed clone-not-allowed m-r-5"
                                                        data-ng-if="choiceCtrl.isCloneAllowed && (mtoChoice.choice_description.includes('clone') || mtoChoice.choice_description.includes('Clone'))"
                                                        rc-popover
                                                        popover-title="Cloning is disabled for this MTO Choice"
                                                        popover-content="Have same identity as the cloned parent MTO Choice, to enable cloning change any master properties of this entity."
                                                        popover-trigger="hover" popover-placement="bottom">
                                                        <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                    </a>
                                                    <a class="cursor-pointer"
                                                        data-ng-click="choiceCtrl.goToClonePanel(mtoChoice)"
                                                        data-ng-if="choiceCtrl.isCloneAllowed && !(mtoChoice.choice_description.includes('clone') || mtoChoice.choice_description.includes('Clone'))">
                                                        <span class="zmdi zmdi-copy zmdi-hc-fw f-19"
                                                            style="color: #82848c;" title="Clone"
                                                            title-direction="top-left" fixed-position="true"></span>
                                                    </a>
                                                    <button class="restricted-btn p-0"
                                                        ng-click="showMetaData(choiceCtrl.entityInformation,mtoChoice,choiceCtrl.permissionsMap);"
                                                        data-ng-disabled="!choiceCtrl.permissionsMap.drop">
                                                        <span class="zmdi zmdi-cloud-outline zmdi-hc-fw f-19 c-gray"
                                                            data-ng-if="choiceCtrl.permissionsMap.drop"
                                                            title="Click here to manage documents" title-direction="top"
                                                            fixed-position="true"></span>
                                                        <span class="zmdi zmdi-cloud-off zmdi-hc-fw f-19 c-gray"
                                                            data-ng-if="!choiceCtrl.permissionsMap.drop" title="Access denied"
                                                            title-direction="top" fixed-position="true"></span>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 content-section">
                                                <div class="col-xs-12 p-0">
                                                    <div class="col-xs-3 p-0 d-flex">
                                                        <img check-image
                                                            class="img-responsive card-image m-auto cursor-pointer"
                                                            image-name="mto-choice.svg"
                                                            data-ng-click="mtoChoice.thumbnail?choiceCtrl.previewDatalake(mtoChoice,'cover_image'):''"
                                                            ng-src="{{mtoChoice.thumbnail}}" />
                                                    </div>
                                                    <div class="col-xs-9 p-0" style="max-height:180px;overflow:auto;">
                                                        <div class="col-sm-6 col-xs-12 p-0 m-b-10">
                                                            <div class="col-xs-12 p-0" ng-if="is_collection">
                                                                <label class="rclabel m-l-10">Collection :</label>
                                                                <label data-ng-show="mtoChoice.collection"
                                                                    class="rclabel m-l-10 c-gray"
                                                                    title="{{mtoChoice.collection}}">{{mtoChoice.collection | truncate :25}}</label>
                                                                <label data-ng-show="!mtoChoice.collection"
                                                                    class="rclabel m-l-10 c-gray"
                                                                    title="{{mtoChoice.collection}}">N/A</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0" ng-if="is_family">
                                                                <label class="rclabel m-l-10">Family :</label>
                                                                <label data-ng-show="mtoChoice.family"
                                                                    class="c-gray m-l-10"
                                                                    title="{{mtoChoice.family}}">{{mtoChoice.family | truncate :25}}</label>
                                                                <label data-ng-show="!mtoChoice.family"
                                                                    class="c-gray m-l-10"
                                                                    title="{{mtoChoice.family}}">N/A</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0" ng-if="is_price">
                                                                <label class="rclabel m-l-10">Price Group :</label>
                                                                <label data-ng-show="mtoChoice.price_group"
                                                                    class="c-gray m-l-10"
                                                                    title="{{mtoChoice.price_group}}">{{mtoChoice.price_group | truncate :25}}</label>
                                                                <label data-ng-show="!mtoChoice.price_group"
                                                                    class="c-gray m-l-10"
                                                                    title="{{mtoChoice.price_group}}">N/A</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Status :</label>
                                                                <label class="rclabel m-l-10"
                                                                    ng-class="{'text-success f-500': mtoChoice.status==='Active' , 'text-warning f-300': mtoChoice.status ==='Pending Active', 'text-primary f-300': mtoChoice.status ==='Inactive','text-info f-300': mtoChoice.status==='Pending Inactive'}">{{mtoChoice.status}}</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6 col-xs-12"
                                                            style="border-left: 1px solid #ececec;">
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Next Status :</label>
                                                                <label
                                                                    class="rclabel m-l-10 c-gray">{{mtoChoice.next_status_value}}</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Next Effective Date
                                                                    :</label>
                                                                <label
                                                                    data-ng-show="mtoChoice.next_status_value !== 'None'"
                                                                    class="c-gray m-l-10">
                                                                    {{mtoChoice.next_effective_date | FormatDate}}
                                                                </label>
                                                                <label
                                                                    data-ng-show="mtoChoice.next_status_value === 'None'"
                                                                    class="c-gray m-l-10">
                                                                    N/A
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Edit Mto choice Icon-->
                                                <div class="col-xs-12 m-t-5 text-center d-flex"
                                                    style="justify-content:space-between;align-items:center;">
                                                    <div class="cursor-pointer d-flex" style="align-items:flex-end;">
                                                        <button class="f-14 restricted-btn text-primary"
                                                            data-ng-click="choiceCtrl.updateMTOChoice(mtoChoice);"
                                                            data-ng-disabled="!choiceCtrl.permissionsMap.update"
                                                            data-ng-class="{'opacity50' : !choiceCtrl.permissionsMap.update}">
                                                            <span class="f-13"
                                                                title="{{!choiceCtrl.permissionsMap.update ? 'Access denied' : ''}}"
                                                                title-direction="top"><i
                                                                    class="fa fa-edit m-r-5"></i>Edit MTO Choice</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <!-- Edit Mto choice Icon-->
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        data-ng-if="choiceGroup.availableGroupChoices > 0 && choiceGroup.isChoicesLoaded === true">
                                        <div class="col-lg-12 col-md-12 aligncenter p-t-10 m-b-10">
                                            <button class="btn btn-sm btn-inverse"
                                                data-ng-disabled="choiceGroup.isMoreChoicesLoaded === false"
                                                data-ng-click="choiceCtrl.loadMoreMtoChoiceData(choiceCtrl.groupByField,choiceGroup)">Load
                                                Remaining {{choiceGroup.availableGroupChoices}} Records</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12 text-center m-t-25 m-b-30"
                                    data-ng-if="choiceGroup.isChoicesLoaded === false || choiceGroup.isMoreChoicesLoaded === false">
                                    <span class="f-17 f-700 c-black">Loading</span>
                                    <span class="f-700" style="letter-spacing: 3px;">
                                        <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                        <span>
                                </div>
                            </div>
                            <!-- Group by panel Section start -->
                            <div class="group-by-panel" data-ng-class="{'activate':choiceCtrl.showgroupByMenu}"
                                data-ng-if="choiceCtrl.groupByField.length>0">
                                <span class="d-flex d-flex-h-center d-flex-v-center bg-primary"
                                    data-ng-if="!choiceCtrl.showgroupByMenu" id="open-setting"
                                    data-ng-click="choiceCtrl.showgroupByMenu = !choiceCtrl.showgroupByMenu;">
                                    <i class="zmdi zmdi-settings"></i>
                                </span>
                                <span class="d-flex d-flex-h-center d-flex-v-center bg-primary"
                                    data-ng-if="choiceCtrl.showgroupByMenu" id="close-setting"
                                    data-ng-click="choiceCtrl.showgroupByMenu = !choiceCtrl.showgroupByMenu;">
                                    <i class="zmdi zmdi-close"></i>
                                </span>
                                <form>
                                    <span class="no-padding group-by-header-panel c-bluegray">Group by</span>
                                    <div class="col-xs-12 p-0 m-b-10">
                                        <select class="form-control select-component input-sm"
                                            ng-model="choiceCtrl.groupByField"
                                            ng-change="choiceCtrl.groupByData(choiceCtrl.groupByField);"
                                            ng-options="each.prefix as each.name for each in choiceCtrl.choiceGroupByDropdown|filter:{prefix:'!description'}|filter:{prefix:'!next_effective_date'}|filter:{prefix:'!effective_date'}">
                                        </select>
                                    </div>
                                    <div class="col-xs-12 p-0 m-b-10 f-500">
                                        <a class="cursor-pointer">
                                            <span data-ng-click="choiceCtrl.toggleAllGroups(1);">Select All</span>
                                        </a> |
                                        <a class="cursor-pointer">
                                            <span data-ng-click="choiceCtrl.toggleAllGroups(0);">Unselect All</span>
                                        </a>
                                    </div>
                                    <div class="col-xs-12 p-0 groupitems-container rc-scroll-bar">
                                        <div data-ng-repeat="gc in choiceCtrl.groupChoices">
                                            <div class="checkbox p-l-5">
                                                <label>
                                                    <span
                                                        data-ng-if="choiceCtrl.groupByField.includes('effective_date')">{{gc[choiceCtrl.groupByField]|FormatDate}}
                                                        <span style="color:green"> [{{gc.count}}]</span>
                                                    </span>
                                                    <span
                                                        data-ng-if="!choiceCtrl.groupByField.includes('effective_date')">{{gc[choiceCtrl.groupByField]}}
                                                        <span style="color:green">
                                                            <span class="f-14 f-700">( {{gc.count}} )</span>
                                                        </span>
                                                    </span>
                                                    <input type="checkbox" ng-model="gc.selected" ng-true-value="1"
                                                        ng-false-value="0"
                                                        ng-click="choiceCtrl.toggleselectedGroupMtoChoice(gc,$index);">
                                                    <i class="input-helper"></i>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- ./group-by-panel -->
                        </d-expand-collapse>
                    </div>
                    <!-- MTO Choice list when group by is applied - END -->

                    <div class="col-xs-12 p-0" ng-if="choiceCtrl.isShowHistory === true;"
                        data-ng-include="'./application/templates/history.html'"></div>
                </div>
                <div class="col-lg-12 p-0">
                    <div id="refresh-table" class="p-15" data-ng-class="{'toggled':choiceCtrl.isRefreshing}">
                        <div class="col-xs-6 p-0">
                            <span class="f-15 f-300 pull-left">{{choiceCtrl.refreshTableText}}</span>
                        </div>
                        <div class="col-xs-6 p-0" data-ng-if="choiceCtrl.totalTimeText">
                            <span class="pull-right f-300">
                                <strong>{{choiceCtrl.mtoChoiceDataList.length}}</strong>
                                <span class="f-14 c-gray">{{choiceCtrl.totalRecordsText}}</span>
                                <span ng-bind-html="choiceCtrl.totalTimeText"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="choiceCtrl.permissionsMap && !choiceCtrl.permissionsMap.view && choiceCtrl.isLoaded"
                data-ng-include="'./application/templates/restricted.access.html'"></div>
            <!-- If choice record count is zero and no filter applied then displays as NO mto choice exists  -->
            <div class="col-xs-12 p-0 module-content"
                data-ng-if="choiceCtrl.permissionsMap && choiceCtrl.permissionsMap.view && !choiceCtrl.isFilterApplied && choiceCtrl.recordsCount === 0 && choiceCtrl.isLoaded">
                <div class="col-xs-12 text-center text-info m-t-25">
                    <span class="f-15 f-300">No MTO choice exists. Please add MTO choice.</span>
                </div>
            </div>
            <!-- If choice data list is zero and filter applied is true then displays as NO matching results  -->
            <div class="col-xs-12 p-0" data-ng-class="{'module-content': !choiceCtrl.recordsCount}"
                data-ng-if="
                    choiceCtrl.isFilterApplied &&
                    (
                        (!choiceCtrl.isGroupByApplied && choiceCtrl.mtoChoiceDataList.length === 0 && choiceCtrl.isLoaded) ||
                        (choiceCtrl.isGroupByApplied && choiceCtrl.groupChoices.length === 0 && choiceCtrl.isGroupHeader)
                    )
                ">
                <div class="col-xs-12 text-center text-info m-t-25">
                    <span class="f-15 f-300">No results matching your criteria. Please amend your search options.</span>
                </div>
            </div>

            <!-- <div data-ng-include="'./application/modules/mto/choice/mto.choice.config.html'"></div> -->
            <div ui-view="clone"></div>
            <!-- This will call filter state keeping the main location state -->
            <div ui-view="filter"></div>
            <meta-data-panel></meta-data-panel>
        </div>
    </div>
</div>