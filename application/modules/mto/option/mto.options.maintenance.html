<style>
    .mto-advance-search multiselect .btn-group button.btn.btn-default.dropdown-toggle.waves-effect:focus{
    border-left: 3px solid #f9c10c !important;
    background: white!important;
    outline: none!important;
    margin-left: -3px;
    }
</style>
<div class="container col-lg-12 p-0 p-b-30" data-ng-controller="MTOMaintenanceController as mtoMaintCtrl"
    data-auto-scroll data-ng-init="mtoMainCtrl.initializeMTO()">
    <!--list panel-->
    <div ui-view>
        <div data-ng-init="mtoMaintCtrl.setInitialHeight();">
            <div class="col-lg-12 p-0 rc-module-header-wrapper" style="height: auto;">
                <div class="rc-module-header" style="height: auto">
                    <div class="col-xs-12 p-0 d-flex align-items-center" style="justify-content: space-between;">
                        <div class="d-flex" style="padding: 0px 10px;box-shadow: 3px 0px 4px -1px #f7f7f7;">
                            <div class="p-relative">
                                <div class="image-module p-absolute top-10">
                                    <img src="./img/sidebar-icons/entity-config-made-to-order.svg" />
                                </div>
                                <div class="label-module top-10">
                                    <a class="p-l-40" href="javascript:void(0)">MTO</a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex" style="flex: 5;" data-ng-if="mtoMaintCtrl.permissionsMap.view">
                            <div class="d-flex d-flex-v-center p-l-20">
                                <span data-ng-show="!mtoMaintCtrl.groupByField" class="f-12">Loaded
                                    <i class="zmdi zmdi-hourglass-alt"
                                        ng-if="!mtoMaintCtrl.mtoDataList.length && mtoMaintCtrl.mtoDataList.length != 0"></i>{{ mtoMaintCtrl.mtoDataList.length}}
                                    of
                                    <i class="zmdi zmdi-hourglass-alt"
                                        ng-if="!mtoMaintCtrl.totalRecordCount && mtoMaintCtrl.totalRecordCount != 0"></i>{{mtoMaintCtrl.totalRecordCount}}
                                    Records
                                </span>
                            </div>
                        </div>
                        <div class="d-flex p-0" data-ng-if="mtoMaintCtrl.isFilterApplied && mtoMaintCtrl.appliedFilterCount">
                            <button type="button" id="filter_applied" name="filter_applied" class="hidden-sm visible-md visible-lg bg-none border-none"
                                data-toggle="collapse" data-target="#advanced-search" data-ng-disabled="(
                                    (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                    (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                )">
                                <span class="c-red m-t-10">
                                    <i class="fa fa-filter p-r-5"></i>{{mtoMaintCtrl.appliedFilterCount}} Filter(s) Applied
                                </span>
                            </button>
                            <button type="button" class="hidden-lg hidden-md visible-sm bg-none border-none"
                                data-toggle="collapse" data-target="#advanced-search" data-ng-disabled="(
                                    (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                    (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                )">
                                <span class="c-red m-t-10">
                                    <i class="fa fa-filter p-r-5"></i>{{mtoMaintCtrl.appliedFilterCount}}
                                </span>
                            </button>
                            <button type="button" id="reset_btn" name="reset_btn" class="hidden-sm bg-none border-none"
                                data-ng-click="mtoMaintCtrl.resetFilters();" data-ng-disabled="(
                                    (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                    (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                )">
                                <span class="text-primary m-t-10 m-l-10">
                                    <i class="fa fa-undo f-12 p-r-5" aria-hidden="true"></i>Reset Filters
                                </span>
                            </button>
                        </div>
                        <div class="d-flex">
                            <div id="navbar" class="navbar-collapse collapse">
                                <ul class="nav navbar-nav navbar-right">
                                    <li ng-if="mtoMaintCtrl.mtoDataList.length > 0 && mtoMaintCtrl.permissionsMap.view">
                                        <a class="d-flex">
                                            <div class="group-by-section tableheader-btn"
                                                ng-init="mtoMaintCtrl.sortBy = mtoMaintCtrl.sortByField !== 'none' ? mtoMaintCtrl.sortByField : sortableFields[0].value"
                                                style="width: 180px;">
                                                <select class="form-control select-component input-sm"
                                                    ng-options="each.value as each.field for each in sortableFields"
                                                    ng-model="mtoMaintCtrl.sortBy"
                                                    ng-change="mtoMaintCtrl.sortByField=mtoMaintCtrl.sortBy; mtoMaintCtrl.sortByOrder='asc'; mtoMaintCtrl.isGroupByApplied ? mtoMaintCtrl.groupByData(mtoMaintCtrl.groupByField) : mtoMaintCtrl.reload(); mtoMaintCtrl.scrollToPosition(0, 0);"
                                                    data-ng-disabled="(
                                                        (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                        (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                    )">
                                                </select>
                                            </div>
                                            <div class="tableheader-btn"
                                                ng-if="mtoMaintCtrl.sortByOrder==='asc' && mtoMaintCtrl.sortBy !== 'none' && mtoMaintCtrl.sortBy !== '' && mtoMaintCtrl.isLoaded"
                                                data-ng-click="mtoMaintCtrl.sortByOrder = 'desc'; mtoMaintCtrl.isGroupByApplied ? mtoMaintCtrl.groupByData(mtoMaintCtrl.groupByField) : mtoMaintCtrl.reload(); mtoMaintCtrl.scrollToPosition(0, 0);">
                                                <span>
                                                    <i class="m-t-5 zmdi zmdi-long-arrow-down zmdi-hc-fw f-700 f-20"
                                                        style="color: firebrick;"></i>
                                                </span>
                                            </div>
                                            <div class="tableheader-btn"
                                                ng-if="mtoMaintCtrl.sortByOrder==='desc' && mtoMaintCtrl.sortBy !== 'none' && mtoMaintCtrl.sortBy !== '' && mtoMaintCtrl.isLoaded"
                                                data-ng-click="mtoMaintCtrl.sortByOrder = 'asc'; mtoMaintCtrl.isGroupByApplied ? mtoMaintCtrl.groupByData(mtoMaintCtrl.groupByField) : mtoMaintCtrl.reload(); mtoMaintCtrl.scrollToPosition(0, 0);">
                                                <span>
                                                    <i class="m-t-5 zmdi zmdi-long-arrow-up zmdi-hc-fw f-700 f-20"
                                                        style="color: firebrick;"></i>
                                                </span>
                                            </div>
                                            <!-- ng-if consists condition for recordsCount is true - couse, when recordsCount is false there is another loading symbol -->
                                            <span class="cursor-not-allowed"
                                                ng-if="!mtoMaintCtrl.isLoaded && mtoMaintCtrl.recordsCount">
                                                <img src="./img/loading-circle.gif" style="height: 30px;width: 30px;" />
                                            </span>
                                        </a>
                                    </li>
                                    <li data-ng-if="mtoMaintCtrl.permissionsMap.view">
                                        <a>
                                            <div class="group-by-section tableheader-btn"
                                                ng-if="mtoMaintCtrl.mtoDataList.length > 0">
                                                <select class="form-control select-component input-sm"
                                                    ng-model="mtoMaintCtrl.groupByField"
                                                    ng-change="mtoMaintCtrl.groupByData(mtoMaintCtrl.groupByField);"
                                                    data-ng-disabled="(
                                                        (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                        (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                    )"
                                                    ng-options="each.prefix as each.name for each in mtoMaintCtrl.mtoGroupByDropdown|filter:{prefix:'!description'}|filter:{prefix:'!effective_date'}">
                                                </select>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="non-collapsed-link" data-ng-if="mtoMaintCtrl.permissionsMap.view">
                                        <a>
                                            <button class="btn search-box-advanced-btn btn-sm"
                                                title="Search will be performed at the server." data-toggle="collapse"
                                                data-target="#advanced-search" data-ng-disabled="(
                                                    (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                    (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                )"
                                                data-ng-click="mtoMaintCtrl.InitializeFilterForm(true);">Search</button>
                                        </a>
                                    </li>
                                    <li class="non-collapsed-link" data-ng-if="mtoMaintCtrl.permissionsMap.view">
                                        <a>
                                            <button type="button"
                                                data-ng-click="mtoMaintCtrl.reloadOptionCountAndList(true);"
                                                data-ng-disabled="(
                                                    (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                    (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                )"
                                                class="btn-primal btn-block waves-effect">
                                                <span class="f-700 ng-binding">Refresh</span>
                                            </button>
                                        </a>
                                    </li>
                                    <li class="m-r-10 non-collapsed-link">
                                        <a>
                                            <button type="button" class="btn btn-success f-700 waves-effect"
                                                data-ng-disabled="!mtoMaintCtrl.permissionsMap.create"
                                                data-ui-sref="common.prime.mtooptions.new">
                                                <span title="{{!mtoMaintCtrl.permissionsMap.create ? 'Access denied' : ''}}"
                                                    title-direction="top">Create MTO</span>
                                            </button>
                                        </a>
                                    </li>
                                    <li class="dropdown collapsed-link" uib-dropdown>
                                        <a uib-dropdown-toggle class="full-height" href="">
                                            <i class="tm-icon zmdi zmdi-more-vert f-25"></i>
                                        </a>
                                        <ul class="dropdown-menu dm-icon pull-right">
                                            <li class="cursor-pointer">
                                                <button class="restricted-btn" style="padding:8px 20px;"
                                                    title="{{!mtoMaintCtrl.permissionsMap.create ? 'Access denied' : ''}}"
                                                    data-ng-disabled="!mtoMaintCtrl.permissionsMap.create"
                                                    data-ng-class="{'opacity50' : !mtoMaintCtrl.permissionsMap.create}"
                                                    data-ui-sref="common.prime.mtooptions.new">
                                                    <i class="zmdi zmdi-plus text-success f-17 m-r-15"></i> Create MTO
                                                </button>
                                            </li>
                                            <li class="cursor-pointer"
                                                ng-if="mtoMaintCtrl.mtoDataList.length > 0 && mtoMaintCtrl.permissionsMap.view">
                                                <a href="" data-ng-click="mtoMaintCtrl.reloadOptionCountAndList(true);"
                                                    data-ng-disabled="(
                                                        (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                        (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                    )"
                                                    class="btn-block waves-effect">
                                                    <i class="zmdi zmdi-refresh text-warning"></i> Refresh</a>
                                            </li>
                                            <li class="cursor-pointer" ng-if="mtoMaintCtrl.permissionsMap.view">
                                                <a data-toggle="collapse" data-target="#advanced-search"
                                                    data-ng-disabled="(
                                                        (!mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isLoaded) ||
                                                        (mtoMaintCtrl.isGroupByApplied && !mtoMaintCtrl.isGroupHeader)
                                                    )"
                                                    data-ng-click="mtoMaintCtrl.InitializeFilterForm(true);"><i
                                                        class="zmdi zmdi-search"></i> Search
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Advanced search panel start -->
                    <div class="col-xs-12 collapse" style="height: auto;" id="advanced-search">
                        <div class="col-xs-12 p-0 " style="height: auto;">
                            <div class="col-xs-12 p-0 filter-search-body p-10">
                                <div class="col-xs-12 filter-search-header">
                                    <span>Advanced Search</span>
                                    <span class="zmdi zmdi-close c-white cursor-pointer f-19 pull-right p-r-5"
                                        data-ng-click="mtoMaintCtrl.InitializeFilterForm(true);"></span>
                                </div>
                                <div class="col-xs-12 filter-search-content">
                                    <ng-form class="mto-advance-search" name="mtoMaintCtrl.mto_filter_from" role="form" novalidate="novalidate">
                                        <div class="col-xs-6" ng-if="mtoMaintCtrl.isResetFilter===false">
                                            <div class="form-group">
                                                <label>Option Type</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="mtoMaintCtrl.filters.optionTypeIds"
                                                    options="type.id as type.short_description for type in mtoMaintCtrl.allMTOTypes"
                                                    select-limit="100" header="Select Type"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':mtoMaintCtrl.filters.optionTypeIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="mtoMaintCtrl.isResetFilter===false">
                                            <div class="form-group">
                                                <label>Vendor</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="mtoMaintCtrl.filters.vendorIds"
                                                    options="each.id as each.name for each in mtoMaintCtrl.allVendors"
                                                    select-limit="100" header="Select Vendor"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':mtoMaintCtrl.filters.vendorIds.length>0}">
                                            </div>
                                        </div>
                                        <div class="col-xs-6" ng-if="mtoMaintCtrl.isResetFilter===false">
                                            <div class="form-group">
                                                <label>Current Status</label>
                                                <multiselect
                                                    class="tabfocus" ng-model="mtoMaintCtrl.filters.currentStatusIds"
                                                    options="status.code as status.description for status in statuses"
                                                    select-limit="100" header="Select Current Status"
                                                    selected-header="options selected" multiple="true" required
                                                    enable-filter="true" filter-placeholder="Quick Search"
                                                    ng-class="{'highlight-filter':mtoMaintCtrl.filters.currentStatusIds.length>0}">
                                            </div>
                                        </div>
                                    </ng-form>
                                </div>
                            </div>
                            <div class="col-xs-12 m-b-10">
                                <div class="pull-left text-danger" data-ng-if="!mtoMaintCtrl.applyFilterSuccess">
                                    {{mtoMaintCtrl.applyFilterMessage}}</div>
                                <div class="m-b-0 pull-left alert alert-success alert-dismissable p-b-5 p-t-5"
                                    data-ng-show="mtoMaintCtrl.message && mtoMaintCtrl.isFilterApplied">
                                    <button type="button" class="close" data-ng-click="mtoMaintCtrl.message = null"
                                        aria-hidden="true">&times;</button> {{mtoMaintCtrl.message}}
                                </div>
                                <div class="m-b-0 pull-left alert alert-success alert-dismissable p-b-5 p-t-5"
                                    data-ng-show="mtoMaintCtrl.resetMessage">
                                    <button type="button" class="close" data-ng-click="mtoMaintCtrl.resetMessage = null"
                                        aria-hidden="true">&times;</button> {{mtoMaintCtrl.resetMessage}}
                                </div>
                                <div class="ipad-advance-search pull-right">
                                    <span class="f-300 text-info m-r-5">[ You can expect some delay as the advanced
                                        search will be performed on the server side.
                                        ]
                                    </span>
                                    <span class="c-red m-r-5"
                                        data-ng-if="mtoMaintCtrl.isFilterApplied && mtoMaintCtrl.appliedFilterCount"> <i
                                            class="fa fa-filter p-r-5"></i>{{mtoMaintCtrl.appliedFilterCount}} Filter(s)
                                        Applied </span>
                                    <span class="m-r-5"
                                        data-ng-if="!mtoMaintCtrl.isFilterApplied || !mtoMaintCtrl.appliedFilterCount">
                                        <i class="fa fa-filter p-r-5"></i> Not applied</span>
                                    <button type="button" class="btn-primary btn tabfocus-btn hidden-sm"
                                        name="filter_mto_btn" id="filter_mto_btn"
                                        ng-click="mtoMaintCtrl.applyFilters(); mtoMaintCtrl.scrollToPosition(0, 0);"
                                        ng-model-options="{debounce:3000}" data-ng-disabled="mtoMaintCtrl.isRefreshing">
                                        <strong>{{mtoMaintCtrl.applyFiltersBtnLabel}}</strong>
                                    </button>
                                    <button type="button" class="btn btn-cancel tabfocus-btn hidden-sm"
                                        name="mto_filter_reset_btn" id="mto_filter_reset_btn"
                                        ng-click="mtoMaintCtrl.resetFilters(-1); mtoMaintCtrl.scrollToPosition(0, 0);"
                                        data-ng-disabled="mtoMaintCtrl.isRefreshing">
                                        <strong>Reset Filters</strong>
                                    </button>
                                    <div class="hidden-lg hidden-md m-t-10">
                                        <button type="button" class="btn-primary btn tabfocus-btn"
                                            name="filter_mto_btn" id="filter_mto_btn"
                                            ng-click="mtoMaintCtrl.applyFilters(); mtoMaintCtrl.scrollToPosition(0, 0);"
                                            ng-model-options="{debounce:3000}"
                                            data-ng-disabled="mtoMaintCtrl.isRefreshing">
                                            <strong>{{mtoMaintCtrl.applyFiltersBtnLabel}}</strong>
                                        </button>
                                        <button type="button" class="btn btn-cancel tabfocus-btn"
                                            name="mto_filter_reset_btn" id="mto_filter_reset_btn"
                                            ng-click="mtoMaintCtrl.resetFilters(-1); mtoMaintCtrl.scrollToPosition(0, 0);"
                                            data-ng-disabled="mtoMaintCtrl.isRefreshing">
                                            <strong>Reset Filters</strong>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- ./rc-module-header -->
            <div class="col-lg-12 text-center module-content"
                data-ng-if="!mtoMaintCtrl.recordsCount>0 && !mtoMaintCtrl.isLoaded">
                <div class="m-t-25">
                    <span class="f-17 f-700 c-black">Loading</span>
                    <span class="f-700" style="letter-spacing: 3px;">....</span>
                </div>
            </div>

            <div class="col-xs-12 p-0 module-content"
                data-ng-if="mtoMaintCtrl.recordsCount && mtoMaintCtrl.recordsCount !== 0">
                <div class="col-xs-12 p-0" data-ng-if="mtoMaintCtrl.permissionsMap.view">
                    <div class="col-xs-12 p-0"
                        data-ng-class="mtoMaintCtrl.groupByField.length>0 ? 'p-r-25 col-xs-12':'col-lg-12'">

                    </div>
                    <div class="col-xs-12">
                        <div class="col-xs-12" data-ng-if="mtoMaintCtrl.disableActions">
                            <span class="pull-right text-danger blinker">* Configuration status should be "Active" to
                                create & maintain entities.</span>
                        </div>
                    </div>
                    <div class="col-xs-12 rcpscrollbar p-0 o-auto pageHeight m-t-10"
                        data-ng-if="!mtoMaintCtrl.groupByField">
                        <div class="col-md-6 col-sm-12 col-xs-12 m-b-10" ng-repeat="mto in mtoMaintCtrl.mtoDataList">
                            <div class="col-xs-12 p-0 expand-collapse-me m-0">
                                <div ios-dblclick="mtoMaintCtrl.dblClickAction(mto);">
                                    <div class="d-flex update-process-overlay"
                                        data-ng-show="mto.isShowUpdateProcessing">
                                        <img class="m-auto" src="./img/loading.gif" alt=""
                                            style="width:100px;height:100px;">
                                    </div>
                                    <div class="col-xs-12 main-card box p-0">
                                        <div class="col-xs-12 header-section"
                                            ng-class="{'status-active f-500':mto.status==='Active','status-pending-active f-300':mto.status==='Pending Active', 'status-inactive f-300':mto.status==='Inactive','status-pending-inactive f-300':mto.status==='Pending Inactive','hightlight-activehistory':mto.showhistory === true || mto.id == $stateParams.id}">
                                            <span class="text-overflow-desc-auto"
                                                title="{{mto.description}}">{{mto.description}}
                                            </span>
                                            <div class="pull-right d-flex align-items-center">
                                                <img class="p-r-5" data-ng-if="mto.isLoadingClone"
                                                    src="./img/loader.gif" alt="Loading" height="25px" />
                                                <a class="cursor-pointer m-r-5"
                                                    data-ng-click="mtoMaintCtrl.showHistoryDetails(mto);">
                                                    <span class="f-16 fa fa-history c-gray" title="History"
                                                        title-direction="top-left" fixed-position="true"></span>
                                                </a>
                                                <a class="cursor-not-allowed clone-not-allowed m-r-5 disable-clone"
                                                    data-ng-if="!mtoMaintCtrl.isCloneAllowed" rc-popover
                                                    popover-title="Cloning feature is disabled"
                                                    popover-content="No access for clone. Enable access to clone MTO Option."
                                                    popover-trigger="hover" popover-placement="bottom">
                                                    <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                </a>
                                                <a class="cursor-not-allowed clone-not-allowed m-r-5 disable-clone"
                                                    data-ng-if="mtoMaintCtrl.isCloneAllowed && (mto.description.includes('clone') || mto.description.includes('Clone'))"
                                                    rc-popover popover-title="Cloning is disabled for this MTO Option"
                                                    popover-content="Have same identity as the cloned parent MTO Option, to enable cloning change any master properties of this entity."
                                                    popover-trigger="hover" popover-placement="bottom">
                                                    <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                </a>
                                                <a class="cursor-pointer"
                                                    data-ng-if="mtoMaintCtrl.isCloneAllowed && !(mto.description.includes('clone') || mto.description.includes('Clone'))"
                                                    data-ng-click="mtoMaintCtrl.goToClonePanel(mto)">
                                                    <span class="zmdi zmdi-copy zmdi-hc-fw f-19"
                                                        style="color: #6e6e6e;margin-right: 4px;" title="Clone"
                                                        title-direction="top-left" fixed-position="true"></span>
                                                </a>
                                                <button class="restricted-btn p-0"
                                                    ng-click="showMetaData(mtoMaintCtrl.entityInformation,mto,mtoMaintCtrl.permissionsMap);"
                                                    data-ng-disabled="!mtoMaintCtrl.permissionsMap.drop">
                                                    <span class="zmdi zmdi-cloud-outline zmdi-hc-fw f-19 c-gray"
                                                        data-ng-if="mtoMaintCtrl.permissionsMap.drop"
                                                        title="Click here to manage documents" title-direction="right"
                                                        fixed-position="true"></span>
                                                    <span class="zmdi zmdi-cloud-off zmdi-hc-fw f-19 c-gray"
                                                        data-ng-if="!mtoMaintCtrl.permissionsMap.drop" title="Access denied"
                                                        title-direction="right" fixed-position="true"></span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 content-section">
                                            <div class="col-xs-12 p-0">
                                                <div class="col-xs-3 p-0 d-flex">
                                                    <img check-image
                                                        class="img-responsive card-image m-auto cursor-pointer"
                                                        image-name="entity-config-made-to-order.svg"
                                                        data-ng-click="mto.thumbnail?mtoMaintCtrl.previewDatalake(mto,'cover_image'):''"
                                                        ng-src="{{mto.thumbnail}}" />
                                                </div>
                                                <div class="col-xs-9 p-0" style="max-height:180px;overflow:auto;">
                                                    <div class="col-xs-12 p-0 m-b-10">
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Option Type :</label>
                                                            <label
                                                                class="rclabel m-l-10 c-gray">{{mto.option_type}}</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Status :</label>
                                                            <label class="rclabel m-l-10"
                                                                ng-class="{'text-success f-500': mto.status==='Active' , 'text-warning f-300': mto.status ==='Pending Active', 'text-primary f-300': mto.status ==='Inactive','text-info f-300': mto.status==='Pending Inactive'}">{{mto.status}}</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Effective Date :</label>
                                                            <label
                                                                class="c-gray m-l-10">{{mto.effective_date | FormatDate}}</label>
                                                        </div>
                                                        <div class="col-xs-12 p-0">
                                                            <label class="rclabel m-l-10">Vendor :</label>
                                                            <label class="rclabel m-l-10 c-gray">{{mto.vendor}}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 text-center d-flex"
                                                style="justify-content:space-between;align-items:center;">
                                                <!-- Edit Mto Icon-->
                                                <div class="cursor-pointer d-flex" style="align-items:flex-end;">
                                                    <button class="f-14 restricted-btn text-primary"
                                                        data-ng-click="mtoMaintCtrl.dblClickAction(mto);"
                                                        data-ng-class="{'opacity50' : !mtoMaintCtrl.permissionsMap.update}"
                                                        data-ng-disabled="!mtoMaintCtrl.permissionsMap.update">
                                                        <span class="f-13"
                                                            title="{{!mtoMaintCtrl.permissionsMap.update ? 'Access denied' : ''}}"
                                                            title-direction="top"><i class="fa fa-edit m-r-5"></i>Edit
                                                            MTO</span>
                                                    </button>
                                                </div>
                                                <!-- Edit Mto Icon-->
                                                <div class="d-flex" style="justify-content: flex-end;">
                                                    <div class="p-5">
                                                        <button type="button" class="btn btn-success btn-block"
                                                            ng-click="mtoMaintCtrl.gotoChoices(mto.id);">
                                                            Maintain
                                                            <strong>Choices</strong>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 text-center m-t-25 m-b-30" data-ng-if="mtoMaintCtrl.isLoading">
                            <span class="f-17 f-700 c-black">Loading</span>
                            <span class="f-700" style="letter-spacing: 3px;">
                                <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                <span>
                        </div>
                        <div ng-if="mtoMaintCtrl.availableMtoCount > 0 && !mtoMaintCtrl.isLoading">
                            <div class="col-lg-12 col-md-12 aligncenter p-t-10 m-b-10">
                                <button class="btn btn-sm btn-inverse" data-ng-click="mtoMaintCtrl.loadMoreMtos()">Load
                                    Remaining {{mtoMaintCtrl.availableMtoCount}} Records</button>
                            </div>
                        </div>
                    </div>

                    <!-- Start Group By View -->
                    <div class="col-xs-12 rcpscrollbar p-0 o-auto pageHeight m-t-10"
                        data-ng-if="mtoMaintCtrl.groupByField">
                        <d-expand-collapse>
                            <div class="col-lg-12 text-center m-t-25 m-b-30" data-ng-if="!mtoMaintCtrl.isGroupHeader">
                                <span class="f-17 f-700 c-black">Loading</span>
                                <span class="f-700" style="letter-spacing: 3px;">
                                    <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                    <span>
                            </div>
                            <div ng-repeat="mtoOptGroup in mtoMaintCtrl.groupMTOMaster"
                                data-ng-if="mtoMaintCtrl.isGroupHeader === true && mtoOptGroup.selected === 1">
                                <div class="col-xs-12"
                                    data-ng-click="mtoMaintCtrl.showMtoData(mtoMaintCtrl.groupByField,mtoOptGroup)">
                                    <div class="col-xs-12 card-group-header" data-ng-click="toggleCollapse($event);">
                                        <span data-ng-if="mtoMaintCtrl.groupByField.includes('effective_date')">
                                            {{mtoOptGroup[mtoMaintCtrl.groupByField] | FormatDate}}
                                            ({{mtoOptGroup.count}})
                                        </span>
                                        <span data-ng-if="!mtoMaintCtrl.groupByField.includes('effective_date')">
                                            {{mtoOptGroup[mtoMaintCtrl.groupByField]}}
                                            <span class="zmdi-hc-fw">({{mtoOptGroup.count}})</span>
                                        </span>
                                        <div id="{{$index}}-groupHeaderIcon" class="pull-right zmdi inline-block"
                                            data-ng-init="initGroupHeader('{{$index}}-groupHeaderIcon',mtoOptGroup)">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 p-0 expand-collapse-me m-0"
                                    data-ng-class="{'d-none':!mtoOptGroup.expanded}"
                                    data-ng-if="mtoOptGroup.mtooptions">
                                    <div class="col-xs-12 m-t-5 m-b-5">
                                        <span
                                            data-ng-show="mtoMaintCtrl.groupByField">{{ mtoOptGroup.mtooptions.length}}
                                            of {{mtoOptGroup.count}} Records found </span>
                                    </div>
                                    <div class="col-md-6 col-sm-12 col-xs-12 m-b-10"
                                        data-ng-if="mtoOptGroup.isMtoOptionsLoaded === true"
                                        data-ng-repeat="mtooption in mtoOptGroup.mtooptions"
                                        ios-dblclick="mtoMaintCtrl.dblClickAction(mtooption);">
                                        <div class="d-flex update-process-overlay"
                                            data-ng-show="mtooption.isShowUpdateProcessing">
                                            <img class="m-auto" src="./img/loading.gif" alt=""
                                                style="width:100px;height:100px;">
                                        </div>
                                        <div class="col-xs-12 main-card box p-0">
                                            <div class="col-xs-12 header-section"
                                                ng-class="{'status-active f-500':mtooption.status==='Active','status-pending-active f-300':mtooption.status==='Pending Active', 'status-inactive f-300':mtooption.status==='Inactive','status-pending-inactive f-300':mtooption.status==='Pending Inactive','hightlight-activehistory':mtooption.showhistory === true || mtooption.id == $stateParams.id}">
                                                <span title="{{mtooption.description}}"
                                                    style="color: #393e52;font-weight: 500;">{{mtooption.description}}
                                                </span>
                                                <div class="pull-right">
                                                    <a class="cursor-pointer m-r-5"
                                                        data-ng-click="mtoMaintCtrl.showHistoryDetails(mtooption);">
                                                        <span class="f-16 fa fa-history c-gray" title="History"
                                                            title-direction="top-left" fixed-position="true"></span>
                                                    </a>
                                                    <a class="cursor-not-allowed clone-not-allowed m-r-5 disable-clone"
                                                        data-ng-if="!mtoMaintCtrl.isCloneAllowed" rc-popover
                                                        popover-title="Cloning feature is disabled"
                                                        popover-content="No access for clone. Enable access to clone MTO Option."
                                                        popover-trigger="hover" popover-placement="bottom">
                                                        <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                    </a>
                                                    <a class="cursor-not-allowed clone-not-allowed m-r-5 disable-clone"
                                                        data-ng-if="mtoMaintCtrl.isCloneAllowed && (mtooption.description.includes('clone') || mtooption.description.includes('Clone'))"
                                                        rc-popover
                                                        popover-title="Cloning is disabled for this MTO Option"
                                                        popover-content="Have same identity as the cloned parent MTO Option, to enable cloning change any master properties of this entity."
                                                        popover-trigger="hover" popover-placement="bottom">
                                                        <span class="zmdi zmdi-lock zmdi-hc-fw f-17 c-firebrick"></span>
                                                    </a>
                                                    <a class="cursor-pointer"
                                                        data-ng-click="mtoMaintCtrl.goToClonePanel(mtooption)"
                                                        data-ng-if="mtoMaintCtrl.isCloneAllowed && !(mtooption.description.includes('clone') || mtooption.description.includes('Clone'))">
                                                        <span class="zmdi zmdi-copy zmdi-hc-fw f-19"
                                                            style="color: #82848c;" title="Clone"
                                                            title-direction="top-left" fixed-position="true"></span>
                                                    </a>
                                                    <button class="restricted-btn p-0"
                                                        ng-click="showMetaData(mtoMaintCtrl.entityInformation,mtooption,mtoMaintCtrl.permissionsMap);"
                                                        data-ng-disabled="!mtoMaintCtrl.permissionsMap.drop">
                                                        <span class="zmdi zmdi-cloud-outline zmdi-hc-fw f-19 c-gray"
                                                            data-ng-if="mtoMaintCtrl.permissionsMap.drop"
                                                            title="Click here to manage documents" title-direction="top"
                                                            fixed-position="true"></span>
                                                        <span class="zmdi zmdi-cloud-off zmdi-hc-fw f-19 c-gray"
                                                            data-ng-if="!mtoMaintCtrl.permissionsMap.drop" title="Access denied"
                                                            title-direction="top" fixed-position="true"></span>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 content-section">
                                                <div class="col-xs-12 p-0">
                                                    <div class="col-xs-3 p-0 d-flex">
                                                        <img check-image
                                                            class="img-responsive card-image m-auto cursor-pointer"
                                                            data-ng-click="mtooption.thumbnail?mtoMaintCtrl.previewDatalake(mtooption,'cover_image'):''"
                                                            image-name="entity-config-made-to-order.svg"
                                                            ng-src="{{mtooption.thumbnail}}" />
                                                    </div>
                                                    <div class="col-xs-9 p-0" style="max-height:180px;overflow:auto;">
                                                        <div class="col-xs-12 p-0 m-b-10">
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Option Type :</label>
                                                                <label
                                                                    class="rclabel m-l-10 c-gray">{{mtooption.option_type}}</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Status :</label>
                                                                <label class="rclabel m-l-10"
                                                                    ng-class="{'text-success f-500': mtooption.status==='Active' , 'text-warning f-300': mtooption.status ==='Pending Active', 'text-primary f-300': mtooption.status ==='Inactive','text-info f-300': mtooption.status==='Pending Inactive'}">{{mtooption.status}}</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Effective Date :</label>
                                                                <label
                                                                    class="c-gray m-l-10">{{mtooption.effective_date | FormatDate}}</label>
                                                            </div>
                                                            <div class="col-xs-12 p-0">
                                                                <label class="rclabel m-l-10">Vendor :</label>
                                                                <label
                                                                    class="rclabel m-l-10 c-gray">{{mtooption.vendor}}</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 text-center d-flex"
                                                    style="justify-content:space-between;align-items:center;">
                                                    <!-- Edit Mto Icon-->
                                                    <div class="cursor-pointer d-flex" style="align-items:flex-end;">
                                                        <button class="f-14 restricted-btn text-primary"
                                                            data-ng-class="{'opacity50' : !mtoMaintCtrl.permissionsMap.update}"
                                                            data-ng-click="mtoMaintCtrl.dblClickAction(mtooption);"
                                                            data-ng-disabled="!mtoMaintCtrl.permissionsMap.update">
                                                            <span class="f-13"
                                                                title="{{!mtoMaintCtrl.permissionsMap.update ? 'Access denied' : ''}}"
                                                                title-direction="top">
                                                                <i class="fa fa-edit m-r-5"></i>Edit MTO
                                                            </span>
                                                        </button>
                                                    </div>
                                                    <!-- Edit Mto Icon-->
                                                    <div class="d-flex" style="justify-content: flex-end;">
                                                        <div class="p-5">
                                                            <button type="button" class="btn btn-success btn-block"
                                                                ng-click="mtoMaintCtrl.gotoChoices(mtooption.id);">
                                                                Maintain
                                                                <strong>Choices</strong>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        data-ng-if="mtoOptGroup.availableGroupMtoOptions > 0 && mtoOptGroup.isMtoOptionsLoaded === true">
                                        <div class="col-lg-12 col-md-12 aligncenter p-t-10 m-b-10">
                                            <button class="btn btn-sm btn-inverse"
                                                data-ng-disabled="mtoOptGroup.isMoreMtoOptsLoaded === false"
                                                data-ng-click="mtoMaintCtrl.loadMoreMtoOptData(mtoMaintCtrl.groupByField,mtoOptGroup)">Load
                                                Remaining {{mtoOptGroup.availableGroupMtoOptions}} Records</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12 text-center m-t-25 m-b-30"
                                    data-ng-if="mtoOptGroup.isMtoOptionsLoaded === false || mtoOptGroup.isMoreMtoOptsLoaded === false">
                                    <span class="f-17 f-700 c-black">Loading</span>
                                    <span class="f-700" style="letter-spacing: 3px;">
                                        <img src="./img/loadingData.gif" style="height: 50px;width: 50px;" />
                                        <span>
                                </div>
                            </div>
                            <!-- Group by panel Section start -->
                            <div class="group-by-panel" data-ng-class="{'activate':mtoMaintCtrl.showgroupByMenu}"
                                data-ng-if="mtoMaintCtrl.groupByField.length>0">
                                <span class="d-flex d-flex-h-center d-flex-v-center bg-primary"
                                    data-ng-if="!mtoMaintCtrl.showgroupByMenu" id="open-setting"
                                    data-ng-click="mtoMaintCtrl.showgroupByMenu = !mtoMaintCtrl.showgroupByMenu;">
                                    <i class="zmdi zmdi-settings"></i>
                                </span>
                                <span class="d-flex d-flex-h-center d-flex-v-center bg-primary"
                                    data-ng-if="mtoMaintCtrl.showgroupByMenu" id="close-setting"
                                    data-ng-click="mtoMaintCtrl.showgroupByMenu = !mtoMaintCtrl.showgroupByMenu;">
                                    <i class="zmdi zmdi-close"></i>
                                </span>
                                <form>
                                    <span class="no-padding group-by-header-panel c-bluegray">Group by</span>
                                    <div class="col-xs-12 p-0 m-b-10">
                                        <select class="form-control select-component input-sm"
                                            ng-model="mtoMaintCtrl.groupByField"
                                            ng-change="mtoMaintCtrl.groupByData(mtoMaintCtrl.groupByField);"
                                            ng-options="each.prefix as each.name for each in mtoMaintCtrl.mtoGroupByDropdown |filter:{prefix:'!description'}|filter:{prefix:'!effective_date'}">
                                        </select>
                                    </div>
                                    <div class="col-xs-12 p-0 m-b-10 f-500">
                                        <a class="cursor-pointer">
                                            <span data-ng-click="mtoMaintCtrl.toggleAllGroups(1);">Select All</span>
                                        </a> |
                                        <a class="cursor-pointer">
                                            <span data-ng-click="mtoMaintCtrl.toggleAllGroups(0);">Unselect All</span>
                                        </a>
                                    </div>
                                    <div class="col-xs-12 p-0 groupitems-container rc-scroll-bar">
                                        <div data-ng-repeat="gc in mtoMaintCtrl.groupMTOMaster">
                                            <div class="checkbox p-l-5">
                                                <label>
                                                    <span
                                                        data-ng-if="mtoMaintCtrl.groupByField.includes('effective_date')">{{gc[mtoMaintCtrl.groupByField]|FormatDate}}
                                                        <span style="color:green"> [{{gc.count}}]</span>
                                                    </span>
                                                    <span
                                                        data-ng-if="!mtoMaintCtrl.groupByField.includes('effective_date')">{{gc[mtoMaintCtrl.groupByField]}}
                                                        <span style="color:green">
                                                            <span class="f-14 f-700">( {{gc.count}} )</span>
                                                        </span>
                                                    </span>
                                                    <input type="checkbox" ng-model="gc.selected" ng-true-value="1"
                                                        ng-false-value="0"
                                                        ng-click="mtoMaintCtrl.toggleselectedGroupMtoOptions(gc,$index);toggleCollapse($event);">
                                                    <i class="input-helper"></i>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <!-- ./group-by-panel -->

                        </d-expand-collapse>
                    </div>
                    <!-- End Group By View -->
                </div>
                <div class="col-xs-12 p-0" ng-if="mtoMaintCtrl.isShowHistory === true;"
                    data-ng-include="'./application/templates/history.html'"></div>
                <meta-data-panel></meta-data-panel>
                <!-- This will call filter state keeping the main MTO Option state -->
                <div ui-view="filter"></div>
                <div ng-if="mtoMaintCtrl.showAddrCnt"
                    data-ng-include="'./application/templates/panel.address.contact.html'">
                </div>
                <div class="col-lg-12 p-0">
                    <div id="refresh-table" class="p-15" data-ng-class="{'toggled':mtoMaintCtrl.isRefreshing}">
                        <div class="col-xs-6 p-0">
                            <span class="f-15 f-300 pull-left">{{mtoMaintCtrl.refreshTableText}}</span>
                        </div>
                        <div class="col-xs-6 p-0" data-ng-if="mtoMaintCtrl.totalTimeText">
                            <span class="pull-right f-300">
                                <strong>{{mtoMaintCtrl.mtoDataList.length}}</strong>
                                <span class="f-14 c-gray">{{mtoMaintCtrl.totalRecordsText}}</span>
                                <span ng-bind-html="mtoMaintCtrl.totalTimeText"></span>
                            </span>
                        </div>
                    </div>
                </div>
                <div ng-if="!mtoMaintCtrl.permissionsMap.view" data-ng-include="'./application/templates/restricted.access.html'">
                </div>
            </div>
            <!-- If mto record count is zero and no filter applied then displays as NO mto option exists  -->
            <div class="col-xs-12 p-0 module-content"
                data-ng-if="!mtoMaintCtrl.isFilterApplied && !mtoMaintCtrl.recordsCount && mtoMaintCtrl.isLoaded">
                <div class="col-xs-12 text-center text-info m-t-25">
                    <span class="f-15 f-300">No MTO option exists. Please add MTO option.</span>
                </div>
            </div>
            <!-- If mto data list is zero and filter applied is true then displays as NO matching results  -->
            <div class="col-xs-12 p-0" data-ng-class="{'module-content': !mtoMaintCtrl.recordsCount}"
                data-ng-if="
                    mtoMaintCtrl.isFilterApplied &&
                    (
                        (!mtoMaintCtrl.isGroupByApplied && mtoMaintCtrl.mtoDataList.length === 0 && mtoMaintCtrl.isLoaded) ||
                        (mtoMaintCtrl.isGroupByApplied && mtoMaintCtrl.groupMTOMaster.length === 0 && mtoMaintCtrl.isGroupHeader)
                    )
                ">
                <div class="col-xs-12 text-center text-info m-t-25">
                    <span class="f-15 f-300">No results matching your criteria. Please amend your search options.</span>
                </div>
            </div>
            <div ui-view="clone"></div>
            <!-- This will call filter state keeping the main MTO Option state -->
            <div ui-view="filter"></div>
        </div>
    </div>
    <!--  <div data-ng-include="'./application/modules/mto/option/mto.maintenance.config.html'"></div> -->
</div>