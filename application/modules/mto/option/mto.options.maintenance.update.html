<style>
    button:focus {
        outline: 5px auto #6ecaf6!important
    }

    input[type="text"]:focus,
    select:focus,
    .select2-container-active {
        border-left: 3px solid #f9c10c!important;
    }

    input[type="radio"]:focus,
    input[type="radio"]:checked {
        border: 2px solid #f9c10c!important;
        border-radius: 50%;
        background-color: #009688;
        box-shadow: inset 0 0 0 1px hsla(0, 0%, 0%, .4), 0 1px 1px hsla(0, 0%, 100%, .8);
        content: '';
        height: 20px;
        width: 20px;
    }

    input[type="radio"] {
        border: 1px solid #5d4565;
        border-radius: 50%;
        cursor: pointer;
        display: inline-block;
        height: 20px;
        margin-right: 5px;
        position: relative;
        width: 20px;
        -webkit-appearance: none;
    }

    .select2-container {
        display: block;
        border-left: 2px solid #d8d8d8;
    }

    .select2-container .select2-choice {
        display: flex !important;
        position: relative !important;
        white-space: nowrap !important;
        color: #444444 !important;
        background-clip: padding-box !important;
        background-image: none !important;
        padding-left: 9px !important;
        overflow: hidden !important;
        border: 1px solid#e2e2e2 !important;
        text-decoration: none !important;
        border-radius: 0px !important;
        align-items: center;
        height: 30px !important;
    }

    .select2-arrow {
        background: transparent !important;
        border: none !important;
    }

    .select2-dropdown-open .select2-choice {
        box-shadow: none !important;
        background-color: white !important;
    }

    .select2-results {
        padding: 0;
        margin: 4px 0px;
    }

    .select2-results li {
        border-top: 1px solid #dcdcdc;
    }

    .select2-results .select2-result-label {
        padding: 6px;
    }

    .select2-search input {
        padding: 5px;
        margin: 0 auto;
        background-image: url('./img/icons/search-2.png');
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center right;
    }

    .select2-drop-active {
        border: 1px solid #e2e2e2;
    }

    .select2-drop {
        width: 100.2%;
        left: -2px;
        z-index: 1;
    }

    .select2-search {
        margin-top: 5px;
    }

    .select2-search input:focus {
        background-image: url('./img/icons/search-2.png');
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center right;
    }

    .select2-results .select2-highlighted span {
        color: #fff;
    }
</style>
<div id="MTOdetails" data-ng-init="mtoMaintCtrl.InitializeCreateUpdateForm(); mtoMaintCtrl.OptionsMap?mtoMaintCtrl.gotoUpdateState():''"
    ng-keyup="mtoMaintCtrl.performKeyUpEvent($event)">
    <div class="form-page-size">
        <div class="maintainence-details-section p-t-10 p-l-10 p-b-10 p-r-0">
            <div class="col-lg-9 col-sm-8 col-xs-7 p-0 inheritheight">
                <div class="col-lg-12 inheritheight">
                    <div ng-show="mtoMaintCtrl.createForm" ng-init="mtoMaintCtrl.setStageIndication('createform');">
                        <div class="col-xs-12 p-0" data-ng-class="{'disable-actions':mtoMaintCtrl.disableActions}">
                            <ng-form name="mtoMaintCtrl.mto_maint_form" role="form" novalidate="novalidate" valdr-type="RULES-36">
                                <!--UPDATE FORM START-->
                                <div class="col-lg-12 p-0">
                                    <div class="col-xs-10 col-lg-8 p-0 box maintenanceworkspace">
                                        <div class="col-lg-12 d-flex update-maintenance-screen-title">
                                            <span class="f-16 c-white m-r-10 text-nowrap">
                                                <i class="fa fa-edit"></i> Update MTO Option - </span>
                                            <span class="f-16 c-white text-overflow-desc-auto" title="{{mtoMaintCtrl.mtooption.description}}" title-direction="bottom">{{mtoMaintCtrl.mtooption.description}}</span>
                                        </div>
                                        <div class="col-xs-12 f-16 panel-header">
                                            <span class="f-700 main-header">Master Details</span>
                                            <div>
                                                <small>The primary details of the MTO Option</small>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 p-10">
                                            <div class="col-xs-12 p-0">
                                                <div class="col-lg-9 col-md-10 col-xs-12">
                                                    <div class="form-group" valdr-form-group>
                                                        <span class="c-red" ng-show="mtoMaintCtrl.mto_maint_form.description.$invalid">* </span>
                                                        <span class="c-green" ng-show="mtoMaintCtrl.mto_maint_form.description.$valid">* </span>

                                                        <label class="maintenance-field-label">Description</label>
                                                        <input id="description" name="description" type="text" class="form-control input-sm" ng-model="mtoMaintCtrl.mtooption.description"
                                                            errorvalue="mtoMaintCtrl.mtooption.description_error" maxlength="{{model.description.size}}"
                                                            placeholder="Enter Description" ng-change="" auto-focus data-ng-class="{'error-field-validation': mtoMaintCtrl.mto_maint_form.description.$invalid && mtoMaintCtrl.isInvalidForm}"
                                                            required/>
                                                        <span class="text-info f-12 f-300" ng-if="mtoMaintCtrl.isCloned">* This MTO Option is cloned from the existing MTO Option</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 p-0">
                                                <div class="col-xs-10 col-lg-9">
                                                    <div class="form-group" valdr-form-group>
                                                        <span class="c-red" ng-show="mtoMaintCtrl.mto_maint_form.option_type.$invalid">* </span>
                                                        <span class="c-green" ng-show="mtoMaintCtrl.mto_maint_form.option_type.$valid">* </span>
                                                        <label class="maintenance-field-label">Option Type</label>
                                                        <select name="option_type" class="form-control select-component input-sm" ng-options="each.id as (each.short_description+' : '+each.status) disable when (each.status_id !== 200)  for each in mtoMaintCtrl.allMTOTypes"
                                                            ng-disabled="mtoMaintCtrl.mtooption.id" ng-model="mtoMaintCtrl.mtooption.option_type_id"
                                                            errorvaluechosen="mtoMaintCtrl.mtooption.option_type_id_error" data-ng-class="{'error-field-validation': mtoMaintCtrl.mto_maint_form.option_type.$invalid && mtoMaintCtrl.isInvalidForm}"
                                                            required="">
                                                            <option value="" disabled>Select Option Type</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 p-0">
                                                <div class="col-xs-10 col-lg-9">
                                                    <div class="form-group" valdr-form-group>
                                                        <span class="c-red" ng-show="mtoMaintCtrl.mto_maint_form.mto_vendor.$invalid">* </span>
                                                        <span class="c-green" ng-show="mtoMaintCtrl.mto_maint_form.mto_vendor.$valid">* </span>
                                                        <label class="maintenance-field-label">Vendor</label>
                                                        <select selectize="selectVendorConfiguration" items="head.vendor" name="mto_vendor" class="form-control select-component input-sm"
                                                            options="mtoMaintCtrl.allVendors" ng-model="mtoMaintCtrl.mtooption.vendor.id"
                                                            data-ng-class="{'error-field-validation': mtoMaintCtrl.mto_maint_form.mto_vendor.$invalid && mtoMaintCtrl.isInvalidForm}"
                                                            required>
                                                        </select>
                                                        <!-- <ui-select items="head.vendor" name="mto_vendor"
                                                            data-ng-init="mtoMaintCtrl.setVendorData(mtoMaintCtrl.mtooption.vendor.id)"
                                                            ng-model="mtoMaintCtrl.selectedVendor" theme="select2"
                                                            required>
                                                            <ui-select-match placeholder="Select vendor">
                                                                <span class="m-r-10" ng-bind-html="$select.selected.name" title="Vendor"></span>
                                                                <span  class="m-r-10 f-12 text-muted" ng-bind-html="$select.selected.status" title="Vendor Status"></span>
                                                                <span class="f-12 text-muted" ng-bind-html="$select.selected.VendorType" title="Vendor Type"></span>
                                                            </ui-select-match>
                                                            <ui-select-choices
                                                            repeat="vendor in mtoMaintCtrl.allVendors | filterBy:['name'] : $select.search"
                                                            ui-disable-choice="vendor.status.toLowerCase() === 'inactive'"
                                                            data-ng-class="{'opacity50' : vendor.status.toLowerCase() === 'inactive'}">
                                                                <span class="m-r-10" ng-bind="vendor.name" title="Vendor"></span>
                                                                <span class="f-12 text-muted" ng-bind="vendor.status" title="Vendor Status"></span>
                                                                <span class="pull-right f-12 text-muted" ng-bind="vendor.VendorType" title="Vendor Type"></span>
                                                            </ui-select-choices>
                                                            </ui-select> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Status section start -->
                                    <div class="col-xs-10 col-lg-8 p-0 box m-t-10 maintenanceworkspace">
                                        <div class="col-xs-12 f-16 panel-header">
                                            <span class="f-700 main-header">Status</span>
                                            <div>
                                                <small>Current and next status for the MTO Option</small>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 p-10">
                                            <div class="col-md-6 col-xs-12">
                                                <div class="form-group" valdr-form-group>
                                                    <span class="c-red" ng-show="mtoMaintCtrl.mto_maint_form.mto_status.$invalid">* </span>
                                                    <span class="c-green" ng-show="mtoMaintCtrl.mto_maint_form.mto_status.$valid">* </span>
                                                    <label class="maintenance-field-label">Current Status</label>
                                                    <select name="mto_status" class="form-control select-component input-sm" ng-options="each.code as each.description disable when (each.code === mtoMaintCtrl.statusCodes.Pending.ID) for each in statuses"
                                                        ng-model="mtoMaintCtrl.mtooption.status_id" errorvaluechosen="mtoMaintCtrl.mtooption.status_id_error"
                                                        data-ng-class="{'error-field-validation': mtoMaintCtrl.mto_maint_form.mto_status.$invalid && mtoMaintCtrl.isInvalidForm}"
                                                        required="">
                                                        <option value="" disabled>Select Current Status</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-xs-12">
                                                <div class="form-group" valdr-form-group>
                                                    <span class="c-red" ng-show="mtoMaintCtrl.mto_maint_form.effective_date.$invalid">* </span>
                                                    <span class="c-green" ng-show="mtoMaintCtrl.mto_maint_form.effective_date.$valid">* </span>
                                                    <label class="maintenance-field-label">Effective Date</label>
                                                    <input type="text" id="effective_date" name="effective_date" required class="form-control input-sm rcp-mydatepicker" ng-model="mtoMaintCtrl.mtooption.effective_date"
                                                        ui-mask="{{ui_date_mask}}" mydatepicker ng-model-options="{ updateOn: 'blur' }"
                                                        model-view-value="true" is-effective-date="true" data-ng-class="{'error-field-validation': mtoMaintCtrl.mto_maint_form.effective_date.$invalid && mtoMaintCtrl.isInvalidForm}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Status section end -->

                                    <div class="col-xs-10 col-lg-8 m-t-10 p-0 maintenanceworkspace noboxshadow" data-ng-if="mtoMaintCtrl.validationMessage">
                                        <div class="col-xs-12 p-0">
                                            <div class="rc-alert rc-alert-type-info type-error" aria-hidden="false" role="alert">
                                                <div class="col-xs-12 d-flex m-b-5 p-0">
                                                    <div class="rc-alert-icon">
                                                        <span class="text-danger zmdi zmdi-alert-octagon" style="font-size:35px" title="Error message" title-direction="bottom" fixed-position="true">
                                                        </span>
                                                    </div>
                                                    <div style="flex:1;">
                                                        <div class="f-15 f-700 text-danger">Error!</div>
                                                        <div>
                                                            <span class="c-black">{{mtoMaintCtrl.validationMessage}}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Section for the buttons -- START -->
                                    <div class="col-xs-10 col-lg-8 p-0 m-t-10">
                                        <div class="col-xs-12 p-0">
                                            <div class="col-xs-6 p-0" data-ng-if="(!mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                                <div class="col-xs-6 p-0">
                                                    <button type="button" class="btn-sm bgm-firebrick c-white btn btn-block f-700" data-ng-click="mtoMaintCtrl.confirmDel()"
                                                        data-ng-disabled="mtoMaintCtrl.disableActions || !mtoMaintCtrl.permissionsMap.delete">
                                                        <div title="{{!mtoMaintCtrl.permissionsMap.delete ? 'Access denied' : ''}}" title-direction="top" fixed-position="true">
                                                            <i class="zmdi zmdi-delete zmdi-hc-fw"></i>Delete</div>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-xs-6 p-0 pull-right d-flex" data-ng-if="(!mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                                <button type="button" class="btn btn-group-justified btn-sm btn-inverse f-700 waves-effect" data-ng-click="mtoMaintCtrl.closeForm();mtoMaintCtrl.reloadOptionCountAndList(true);">Cancel</button>
                                                <button type="button" class="btn btn-group-justified btn-sm btn-success f-700 m-l-5 waves-effect" data-ng-click="mtoMaintCtrl.continueFn('createForm')">Next</button>
                                            </div>
                                            <div class="col-xs-6 p-0 pull-right d-flex" data-ng-if="!(mtoMaintCtrl.showDependencyDetails || mtoMaintCtrl.showDependencyDetailsData) && (mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                                <button type="button" class="btn btn-group-justified btn-sm btn-inverse f-700" data-ng-click="mtoMaintCtrl.confirmDel()"
                                                    data-ng-disabled="mtoMaintCtrl.isLoadingDelete">Cancel</button>
                                                <button type="button" class="btn btn-group-justified btn-sm btn-danger f-700 m-l-5 m-t-0" data-ng-click="mtoMaintCtrl.delete(mtoMaintCtrl.mtooption);"
                                                    data-ng-disabled="mtoMaintCtrl.isLoadingDelete">
                                                    <span data-ng-if="mtoMaintCtrl.isLoadingDelete">
                                                        <i class="fa fa-spinner fa-spin m-r-5"></i>
                                                    </span>
                                                    Yes,Delete!
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Section for the buttons -- END -->
                                </div>
                                <!--UPDATE FORM END-->
                            </ng-form>
                        </div>
                    </div>
                    <!--Div is for the manage drops in vendor-->
                    <div ng-if="mtoMaintCtrl.manageDropScreen" ng-init="mtoMaintCtrl.setStageIndication('dropScreen');mtoMaintCtrl.fetchDropsByUuidAndInstanceId(mtoMaintCtrl.mtooption.id);mtoMaintCtrl.initializeDropForm()">
                        <ng-form name="mtoMaintCtrl.drop_form" novalidate="novalidate">
                            <div class="col-xs-10 col-lg-8 p-0">
                                <div class="col-lg-12 d-flex update-maintenance-screen-title">
                                    <span class="f-16 c-white m-r-10 text-nowrap">
                                        <i class="fa fa-edit"></i> Update MTO Option - </span>
                                    <span class="f-16 c-white text-overflow-desc-auto" title="{{mtoMaintCtrl.mtooption.description}}" title-direction="bottom">{{mtoMaintCtrl.mtooption.description}}</span>
                                </div>
                                <div class="col-xs-12 p-0 box maintenanceworkspace">
                                    <div class="col-xs-12 f-16 panel-header">
                                        <span class="f-700 main-header">Unstructured Data</span>
                                        <div>
                                            <small>Add/Remove drops for the MTO Option</small>
                                        </div>
                                    </div>
                                    <div data-ng-include="'./template/unstructured.data.info.section.html'"></div>
                                    <div class="col-xs-12 p-10">
                                        <div class="col-xs-6">
                                            <div class="text-info text-center f-12 m-t-5" ng-if="loadingStreams">Loading streams...
                                            </div>
                                            <div class="text-info text-center f-12 m-t-5" ng-if="!streams.length && !loadingStreams">No streams exists for selected lake</div>
                                            <div class="form-group" ng-if="drop.lake_id && !loadingStreams">
                                                <span class="c-red" ng-show="mtoMaintCtrl.drop_form.stream_id.$invalid">*
                                                </span>
                                                <span class="c-green" ng-show="mtoMaintCtrl.drop_form.stream_id.$valid">*
                                                </span>
                                                <label>Stream</label>
                                                <select id="stream_id" name="stream_id" ng-model="drop.stream_id" class="form-control select-component input-sm" ng-options="item.stream_id as item.stream for item in streams"
                                                    data-ng-change="mtoMaintCtrl.getLakeStreamLinkByIds(drop.lake_id,drop.stream_id);resetAllconfigData()"
                                                    data-ng-disabled="showConfirm" required>
                                                    <option value="" disabled>Select Stream</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 p-0">
                                            <div class="col-xs-12">
                                                <span class="c-green">*</span>
                                                <label>Status</label>
                                            </div>
                                            <div class="col-xs-12 form-group d-flex m-t-5 p-0" data-ng-init="mtoMaintCtrl.getDropStatus()">
                                                <div ng-repeat="status in statusList">
                                                    <div class="m-l-10 m-r-10" data-ng-init="status.isDefault ? drop.status_id = status.id : ''">
                                                        <label class="d-flex align-items-center m-r-5">
                                                            <input hidden="hidden" type="radio" name="status" id="{{$index}}-status-local" ng-model="drop.status_id" value="{{status.id}}"
                                                                required ng-checked="status.isDefault">
                                                            <i class="input-helper"></i>{{status.label}}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 p-0">
                                            <div class="col-xs-12">
                                                <span class="c-green">*</span>
                                                <label>Source</label>
                                            </div>
                                            <div class="col-xs-12 form-group d-flex">
                                                <div class="m-t-5">
                                                    <label class="d-flex align-items-center">
                                                        <input hidden="hidden" type="radio" name="match" id="match-local" ng-model="drop.source" data-ng-change="mtoMaintCtrl.choicedataUploaderror = false;resetAllconfigData()" value="local" required>
                                                        <i class="input-helper"></i>Upload from Local Computer
                                                    </label>
                                                </div>
                                                <div class="m-t-5 m-l-10">
                                                    <label class="d-flex align-items-center">
                                                        <input hidden="hidden" type="radio" name="match" id="match-url" ng-model="drop.source" value="url" ng-click="drop.is_save_to_document_store=true;resetAllconfigData()"
                                                            required>
                                                        <i class="input-helper"></i>Upload from Internet
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-12 p-0" data-ng-if="drop.source.toLowerCase() === 'local'" style="align-items:flex-end;">
                                            <div class="col-xs-4 col-lg-7">
                                                <div class="form-group" ng-repeat="f in files">
                                                    <label>File Name</label>
                                                    <label name="filename" class="form-control input-sm o-hidden text-overflow-desc-auto" title="{{f.name}}" disabled required>{{f.name}}</label>
                                                </div>
                                                <div class="text-danger p-t-10" data-ng-if="errFiles" data-ng-repeat="ef in errFiles">
                                                    <span data-nf-if="ef.$errorMessages && ef.$errorMessages.maxSize">
                                                        * {{ef.name}} exedes size limit {{ef.$errorParam}}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xs-8 col-lg-5 p-0" style="margin-top: 22px;">
                                                <div class="col-lg-6 p-l-0 form-group pull-right" data-ng-click="mtoMaintCtrl.isAllowedMultipleDropsForSelectedStream(drops)">
                                                    <button type="button" class="btn btn-success f-700 btn-block" name="update_title_btn" id="update_title_btn" ng-disabled="!isAllowMultipleDrops || mtoMaintCtrl.isProcessing || mtoMaintCtrl.isDeleting || mtoMaintCtrl.drop_form.$invalid || !files || !files.length || mtoMaintCtrl.isUploading || notImage">
                                                        <span data-ng-if="mtoMaintCtrl.isUploading">
                                                            <i class="fa fa-spinner fa-spin m-r-5"></i>
                                                        </span>
                                                        Upload
                                                    </button>
                                                </div>
                                                <div class="col-lg-6 p-l-0 form-group pull-right">
                                                    <button type="button" class="btn btn-info f-700 btn-block"
                                                        ng-disabled="!isAllowMultipleDrops|| mtoMaintCtrl.isUploading" name="update_title_btn" id="update_title_btn"
                                                        ngf-select="mtoMaintCtrl.selectFiles($files, $invalidFiles)" multiple accept="*" ngf-max-size="60MB">
                                                        <span data-ng-if="!files || files.length <1">Select File</span>
                                                        <span data-ng-if="files.length >=1">Choose File</span>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 col-xs-12">
                                                <div class="checkbox m-b-10" data-ng-if="drop.stream_id == '33' && files.length && !notImage">
                                                    <label class="d-flex">
                                                        <input type="checkbox" data-ng-model="mtoMaintCtrl.is_thumbnail" ng-true-value="1" ng-false-value="0">
                                                        <i class="input-helper center"></i>
                                                        <span> Save as thumbnail</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-danger p-b-10 m-l-10" data-ng-if="notImage">* Selected File is
                                            not an image</div>
                                        <div class="col-xs-12 p-0 d-flex" data-ng-if="drop.source.toLowerCase() === 'url'" style="align-items:flex-end;">
                                            <div class="col-xs-12">
                                                <div class="form-group">
                                                    <span class="c-red" ng-show="mtoMaintCtrl.drop_form.url.$invalid || notImageUrl || invalidUrl">*
                                                    </span>
                                                    <span class="c-green" ng-show="mtoMaintCtrl.drop_form.url.$valid && !notImageUrl && !invalidUrl">*
                                                    </span>
                                                    <label>URL</label>
                                                    <input id="url" ng-bind="datas" name="url" ng-keyup="mtoMaintCtrl.validateUrl(drop.url);"
                                                        type="text" class="form-control input-sm" ng-model="drop.url" placeholder="Enter URL" data-ng-change="mtoMaintCtrl.showCantGen = false"
                                                        required>
                                                       
                                                    <span class="text-danger" ng-if="(mtoMaintCtrl.drop_form.url.$error.pattern && !mtoMaintCtrl.drop_form.url.$pristine) || invalidUrl">Invalid URL
                                                    </span>
                                                    <span class="text-danger" ng-if="mtoMaintCtrl.showCantGen">Cannot convert the given url into file
                                                    </span>
                                                    <!-- <img data-ng-if="drop.source.toLowerCase()=='url' &&mtoMaintCtrl.drop_form.url.$valid && !mtoMaintCtrl.showCantGen"
                                                    ng-src="{{drop.url}}" style="height:125px;width:125px;" /> -->
                                                    <div class="col-xs-12 p-0 form-group" data-ng-if="drop.source.toLowerCase()=='url' && isImage && files.length > 0" style="display: inline-flex;top: 5px;flex-direction: column;">
                                                        <img data-ng-if="drop.source.toLowerCase()=='url' && mtoMaintCtrl.drop_form.url.$valid && !mtoMaintCtrl.showCantGen"
                                                        ng-src="{{drop.url}}" style="height:125px;width:125px;" />
                                                        <div class="d-flex" style="align-items: flex-end;" ng-repeat="f in files">
                                                            <label class="c-gray f-300">{{f.type | truncate:40}}</label>
                                                            <label class="c-gray f-300" style="margin-left: 15px">{{f.size}} kb</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div data-ng-if="drop.url&&drop.url.length>0&&mtoMaintCtrl.drop_form.url.$valid && !notImageUrl && !invalidUrl" class="checkbox m-b-10">
                                                    <label class="d-flex">
                                                        <input type="checkbox" data-ng-disabled="drop.source.toLowerCase()=='url'"  data-ng-model="drop.is_save_to_document_store" ng-true-value=true ng-false-value=false>
                                                        <i class="input-helper" data-ng-disabled="drop.source.toLowerCase()=='url'" 
                                                        ng-class="{'cursor-nt-al': drop.source.toLowerCase()=='url'}" title="{{drop.source.toLowerCase()=='url'? 'Saving to document store by default':''}}" ></i>
                                                        <span>Save to document store</span>
                                                    </label>
                                                    <label class="m-t-10" data-ng-if="drop.stream_id == '33'">
                                                        <input type="checkbox" data-ng-model="mtoMaintCtrl.is_thumbnail" ng-true-value="1" ng-false-value="0">
                                                        <i class="input-helper"></i>
                                                        <span class="m-t-5"> Save as thumbnail</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 p-0">
                                                <div class="col-xs-6 p-l-0 form-group pull-right" data-ng-click="mtoMaintCtrl.isAllowedMultipleDropsForSelectedStream(drops)">
                                                    <button type="button" ng-disabled="!isAllowMultipleDrops || mtoMaintCtrl.drop_form.$invalid || mtoMaintCtrl.isUploading || mtoMaintCtrl.showCantGen||notImageUrl||invalidUrl"
                                                        class="btn btn-success f-700 btn-block" name="update_title_btn" id="update_title_btn">
                                                        <span data-ng-if="mtoMaintCtrl.isUploading">
                                                            <i class="fa fa-spinner fa-spin m-r-5"></i>
                                                        </span>
                                                        Upload
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-danger p-b-10 m-l-10" data-ng-if="notImageUrl">* URL is
                                            not an image</div>
                                        <!-- Message to replace existing drop and upload new drop when is upload multiple is false START -->
                                        <div class="col-xs-12">
                                            <div class="col-lg-12 col-xs-12 p-0" data-ng-if="!isAllowMultipleDrops" style="border: 1px solid lightgrey;box-shadow: 1px 1px 4px lightgrey;">
                                                <div class="col-xs-12 p-10 d-flex d-flex-v-center f-15 f-500" style="background: #f5faff;border-bottom: 1px solid #e0e0e0;">
                                                    Are you sure?
                                                </div>
                                                <div class="col-lg-12 d-flex d-flex-h-center d-flex-v-center p-10" style="flex-direction: column;line-height:2;">
                                                    <span class="f-16 c-firebrick">{{selectedLakeStream.lake}} lake and {{selectedLakeStream.stream}} stream
                                                        doesn't allow multiple drops.
                                                    </span>
                                                    <span class="text-info f-14 f-500">
                                                        If you proceed current drop will be replaced. Do you want to replace and upload?
                                                    </span>
                                                </div>
                                                <div class="col-xs-12">
                                                    <div class="form-group pull-right">
                                                        <button class="btn btn-block btn-success waves-effect f-700" ng-if="!updateFile" ng-click="mtoMaintCtrl.addCoverImg()"
                                                            ng-disabled="mtoMaintCtrl.drop_form.$invalid || mtoMaintCtrl.isProcessing || mtoMaintCtrl.isDeleting">
                                                            <span ng-if="!(mtoMaintCtrl.drop_form.$invalid || mtoMaintCtrl.isProcessing || mtoMaintCtrl.isDeleting)">Yes, Upload!</span>
                                                            <span ng-if="mtoMaintCtrl.drop_form.$invalid || mtoMaintCtrl.isProcessing || mtoMaintCtrl.isDeleting">Uploading...</span>
                                                        </button>
                                                    </div>
                                                    <div class="form-group pull-right m-r-5">
                                                        <button class="btn btn-block btn-inverse waves-effect f-700" data-ng-click="mtoMaintCtrl.initializeDropForm()">
                                                            Cancel
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End -->
                                        <!-- on deletion of cover image -->
                                        <div class="col-xs-12">
                                            <div class="col-lg-12 col-xs-12 p-0" data-ng-if="mtoMaintCtrl.showConfirmDeletion" style="border: 1px solid lightgrey;box-shadow: 1px 1px 4px lightgrey;">
                                                <div class="col-xs-12 p-10 d-flex d-flex-v-center f-15 f-500" style="background: #f5faff;border-bottom: 1px solid #e0e0e0;">
                                                    Are you sure?
                                                </div>
                                                <div class="col-lg-12 col-xs-12 d-flex d-flex-h-center d-flex-v-center p-10" style="flex-direction: column;line-height:2;">
                                                    <span class="f-16">Removing cover image will remove the same from thumbnail. Do you want
                                                        to delete ?
                                                    </span>
                                                </div>
                                                <div class="col-xs-12">
                                                    <div class="form-group pull-right">
                                                        <button class="btn btn-block btn-success waves-effect f-700" ng-if="!updateFile" ng-click="mtoMaintCtrl.removeDrop(drop)">
                                                            Yes, Delete!
                                                        </button>
                                                    </div>
                                                    <div class="form-group pull-right m-r-5">
                                                        <button class="btn btn-block btn-inverse waves-effect f-700" data-ng-click="mtoMaintCtrl.initializeDropForm()">
                                                            Cancel
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End -->
                                        <div class="f-14 f-700 c-firebrick" data-ng-if="mtoMaintCtrl.choicedataUploaderror">{{mtoMaintCtrl.choicedataUploaderror}}</div>
                                    </div>
                                </div>
                                <!-- Table to show the cover images and the Thumbnails start -->
                                <div class="col-xs-12 p-0 box maintenanceworkspace m-t-10">
                                    <div class="col-xs-12 m-b-10 p-0">
                                        <div class="col-xs-12 f-16 panel-header">
                                            <span class="f-700 main-header">Images linked to the MTO Option</span>
                                            <div>
                                                <small>Images which are already linked are listed here.</small>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 o-auto p-t-10" id="showQueueMessage" data-ng-class="{'isProccessing':mtoMaintCtrl.isDeleting && mtoMaintCtrl.isDeleting === true,'processed':mtoMaintCtrl.isDeleting && mtoMaintCtrl.isDeleting === 1}">
                                            <div class="col-xs-12 p-0" style="border:1px solid #ececec;">
                                                <div class="col-xs-12 p-10 queue-message-header" style="background: #fafafa;color: #1369ab;font-weight: 700;">
                                                    <span>Drop Status</span>
                                                </div>
                                                <!-- Section to show the message for the Image added to Queue start -->
                                                <div class="col-xs-12 m-t-10 p-0">
                                                    <div class="col-xs-12 p-10">
                                                        <span class="d-flex f-14 f-700 di-block" style="color: #386d39;">
                                                            <!-- <div class="text-center" ng-if="mtoMaintCtrl.isDeleting && mtoMaintCtrl.isDeleting === true">
                                                            <img class="m-auto" src="/images/product_search.gif" alt="" width="40px" height="40px" />
                                                        </div> -->
                                                            <span class="f-21 f-700 m-r-5 text-success zmdi zmdi-check zmdi-hc-fw" ng-if="mtoMaintCtrl.isDeleting && mtoMaintCtrl.isDeleting === 1"
                                                                style="color: #5ca05d;"></span> {{mtoMaintCtrl.showSuccessQueueMessage}}
                                                            <img src="./img/loadingData.gif" ng-if="mtoMaintCtrl.isDeleting && mtoMaintCtrl.isDeleting === true" style="height: 30px;width: 30px;"
                                                            />
                                                        </span>
                                                    </div>
                                                </div>
                                                <!-- Section to show the message for the Image added to Queue end -->
                                            </div>
                                        </div>

                                        <div class="col-xs-12 o-auto p-t-10" data-ng-if="drops.length > 0 && !isLoadingDrops">
                                            <table class="table table-condensed table-bordered-sm table-bordered table-vmiddle maintenance-drops-table">
                                                <thead>
                                                    <tr>
                                                        <th>Name/URL</th>
                                                        <th>Size</th>
                                                        <th>Lake</th>
                                                        <th>Stream</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody data-ng-repeat="(groupName,dropValues) in drops|groupBy:'stream' track by $index">
                                                    <tr>
                                                        <td colspan="5" class="group-header-cover-img">{{groupName}}</td>
                                                    </tr>
                                                    <tr class="repeated-item" data-ng-repeat="drop in dropValues" data-ng-init="drop.thumbnail=mtoMaintCtrl.getDownloadUrl(drop.drop_id, drop.url)"
                                                        ng-disabled="isDeleting">
                                                        <td>{{drop.file_name || (drop.url | limitTo: 50)}}
                                                            <span ng-if="drop.url">
                                                                ... </span>
                                                        </td>
                                                        <td>
                                                            <span data-ng-if="drop.size">{{drop.size/1024 | DecimalPrecision:1 }} KB</span>
                                                            <span data-ng-if="!drop.size"> - </span>
                                                        </td>
                                                        <td>{{drop.lake}}</td>
                                                        <td>{{drop.stream}}</td>
                                                        <td class="text-center d-flex" style="justify-content: space-evenly;">
                                                            <a class="c-teal f-500 cursor-pointer f-17" ng-click="mtoMaintCtrl.previewDatalake(drop,drop.stream_code)" title="Preview">
                                                                <span class="zmdi zmdi-picture-in-picture zmdi-hc-fw"></span>
                                                            </a>
                                                            <a class="f-500 cursor-pointer f-17" data-ng-disabled="drop.size == 0" ng-click="mtoMaintCtrl.downloadFile(drop.drop_id,drop.file_name, drop)" title="Download Image">
                                                                <span class="zmdi zmdi-download zmdi-hc-fw text-info"></span>
                                                            </a>
                                                            <a class="c-firebrick f-500 cursor-pointer f-17" ng-click="mtoMaintCtrl.confirmRemoveDrop(drop)" title="Unlink Image">
                                                                <span class="zmdi zmdi-delete zmdi-hc-fw"></span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                                <!-- <tbody>
                                                    <tr>
                                                        <td colspan="5" class="group-header-cover-img">Cover Image</td>
                                                        <tr class="repeated-item" data-ng-repeat="drop in drops" ng-disabled="isDeleting" data-ng-if="drop.stream_code==='cover_image'">
                                                            <td>{{drop.file_name || (drop.url | limitTo: 50)}}
                                                                <span ng-if="drop.url">
                                                                    ... </span>
                                                            </td>
                                                            <td> {{drop.size/1024 | DecimalPrecision:1 }} KB</td>
                                                            <td>{{drop.lake}}</td>
                                                            <td>{{drop.stream}}</td>
                                                            <td class="text-center d-flex" style="justify-content: space-evenly;">
                                                                <a class="c-teal f-500 cursor-pointer f-17" ng-click="" title="Preview Image">
                                                                    <span class="zmdi zmdi-picture-in-picture zmdi-hc-fw"></span>
                                                                </a>
                                                                <a class="f-500 cursor-pointer f-17" ng-click="mtoMaintCtrl.downloadFile(drop.drop_id,drop.file_name)" title="Download Image">
                                                                    <span class="zmdi zmdi-download zmdi-hc-fw text-info"></span>
                                                                </a>
                                                                <a class="c-firebrick f-500 cursor-pointer f-17" ng-click="mtoMaintCtrl.removeDrop(drop)" title="Unlink Image">
                                                                    <span class="zmdi zmdi-delete zmdi-hc-fw"></span>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <td colspan="5" class="group-header-thumbnail">Thumbnails</td>
                                                        <tr class="repeated-item" ng-repeat="drop in drops" data-ng-if="drop.stream_code==='thumbnail'">
                                                            <td>{{drop.file_name || (drop.url | limitTo: 50)}}</td>
                                                            <td>
                                                                {{drop.size/1024 | DecimalPrecision:1 }} KB
                                                            </td>
                                                            <td>{{drop.lake}}</td>
                                                            <td>{{drop.stream}}</td>
                                                            <td class="text-center d-flex" style="justify-content: space-evenly;">
                                                                <a class="c-teal f-500 cursor-pointer f-17" ng-click="" title="Preview Image">
                                                                    <span class="zmdi zmdi-picture-in-picture zmdi-hc-fw"></span>
                                                                </a>
                                                                <a class="f-500 cursor-pointer f-17" ng-click="mtoMaintCtrl.downloadFile(drop.drop_id,drop.file_name)" title="Download Image">
                                                                    <span class="zmdi zmdi-download zmdi-hc-fw text-info"></span>
                                                                </a>
                                                                <a class="c-firebrick f-500 cursor-pointer f-17" ng-disabled="mtoMaintCtrl.isDeleting" ng-click="mtoMaintCtrl.removeDrop(drop)"
                                                                    title="Unlink Image">
                                                                    <span class="zmdi zmdi-delete zmdi-hc-fw"></span>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    </tr>
                                                </tbody> -->
                                            </table>
                                        </div>

                                        <div class="col-xs-12 o-auto p-t-10" data-ng-if="drops.length === 0&&!isLoadingDrops">
                                            <span>No drops exists for selected MTO Option.</span>
                                        </div>
                                        <div class="col-xs-12 o-auto p-t-10" data-ng-if="isLoadingDrops">
                                            <span>Loading...</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 m-t-10 p-0 maintenanceworkspace noboxshadow" data-ng-if="mtoMaintCtrl.validationMessage ">
                                    <div class="col-xs-12 p-0">
                                        <div class="rc-alert rc-alert-type-info type-error" aria-hidden="false" role="alert">
                                            <div class="col-xs-12 d-flex m-b-5 p-0">
                                                <div class="rc-alert-icon">
                                                    <span class="text-danger zmdi zmdi-alert-octagon" style="font-size:35px">
                                                    </span>
                                                </div>
                                                <div style="flex:1;">
                                                    <div class="f-15 f-700 text-danger">Error!</div>
                                                    <div>
                                                        <span class="c-black">{{mtoMaintCtrl.validationMessage}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Table to show the cover images and the Thumbnails end -->
                                <div class="col-xs-12 m-t-10 p-0 m-b-10">
                                    <div class="col-xs-4 p-0" data-ng-if="(!mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                        <div class="col-xs-7 p-0">
                                            <button type="button" class="btn-sm bgm-firebrick c-white btn btn-block f-700" data-ng-click="mtoMaintCtrl.confirmDel()"
                                                data-ng-disabled="mtoMaintCtrl.disableActions || !mtoMaintCtrl.permissionsMap.delete">
                                                <div title="{{!mtoMaintCtrl.permissionsMap.delete ? 'Access denied' : ''}}" title-direction="top" fixed-position="true">
                                                    <i class="zmdi zmdi-delete zmdi-hc-fw"></i>Delete</div>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-xs-8 col-lg-6 p-0 pull-right d-flex" data-ng-if="(!mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                        <button type="button" class="btn btn-block btn-cancel f-700 waves-effect" data-ng-click="mtoMaintCtrl.closeForm();mtoMaintCtrl.reloadOptionCountAndList(true);">Cancel</button>
                                        <button type="button" class="btn btn-block btn-inverse f-700 m-l-5 m-t-0 waves-effect" data-ng-click="mtoMaintCtrl.backFn('dropScreen');"
                                            ng-disabled="mtoMaintCtrl.isProcessing ||mtoMaintCtrl.isDeleting">Back</button>
                                        <button type="button" class="btn btn-block btn-success f-700 m-l-5 m-t-0 waves-effect" data-ng-click="mtoMaintCtrl.continueFn('dropScreen')"
                                            ng-disabled="mtoMaintCtrl.isProcessing ||mtoMaintCtrl.isDeleting">Next</button>
                                        <button data-ng-if="files.length > 0 || mtoMaintCtrl.drop_form.url.$valid" type="button" class="btn btn-block btn-info f-700 m-l-5 m-t-0 waves-effect"
                                            data-ng-click="mtoMaintCtrl.continueFn('skip')" ng-disabled="mtoMaintCtrl.isProcessing ||mtoMaintCtrl.isDeleting">Skip</button>
                                    </div>
                                    <div class="col-xs-6 p-0" data-ng-if="mtoMaintCtrl.deleteLocationMessage">
                                        <div class="col-xs-12 p-0">
                                            <div class="col-lg-12">
                                                <div class="alert alert-danger alert-dismissable">
                                                    <button type="button" class="close" data-ng-click="mtoMaintCtrl.deleteLocationMessage = null" aria-hidden="true">&times;</button> {{mtoMaintCtrl.deleteLocationMessage}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 p-0 pull-right d-flex" data-ng-if="!(mtoMaintCtrl.showDependencyDetails || mtoMaintCtrl.showDependencyDetailsData) && (mtoMaintCtrl.confirmDelete && !mtoMaintCtrl.opdone)">
                                        <button type="button" class="btn btn-group-justified btn-sm btn-inverse f-700" data-ng-click="mtoMaintCtrl.confirmDel()"
                                            data-ng-disabled="mtoMaintCtrl.isLoadingDelete">Cancel</button>
                                        <button type="button" class="btn btn-group-justified btn-sm btn-danger f-700 m-l-5 m-t-0" data-ng-click="mtoMaintCtrl.delete(mtoMaintCtrl.mtooption);"
                                            data-ng-disabled="mtoMaintCtrl.isLoadingDelete">
                                            <span data-ng-if="mtoMaintCtrl.isLoadingDelete">
                                                <i class="fa fa-spinner fa-spin m-r-5"></i>
                                            </span>
                                            Yes,Delete!
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </ng-form>
                    </div>
                    <!--End of manage drops in vendor div -->

                    <!--Div for preview and publish item stage start-->
                    <div ng-if="mtoMaintCtrl.previewAndPublish" ng-init="mtoMaintCtrl.setStageIndication('previewandpublish');">
                        <div class="col-lg-12 p-0 maintenanceworkspace noboxshadow">
                            <div class="rcpscrollbar o-auto full-height">
                                <div class="col-xs-12 m-b-10" data-ng-show1="!mtoMaintCtrl.publishResponseMessage">
                                    <div class="col-lg-12 d-flex update-maintenance-screen-title" data-ng-class="{'d-none' : mtoMaintCtrl.publishResponseMessage}">
                                        <span class="f-16 c-white text-nowrap">
                                            <i class="fa fa-edit"></i> Update MTO Option - </span>
                                        <span class="f-16 c-white text-overflow-desc-auto" title="{{mtoMaintCtrl.mtooption.description}}" title-direction="bottom">{{mtoMaintCtrl.mtooption.description}}</span>
                                    </div>
                                    <div class="col-xs-12 d-flex p-0" style="min-height:50px;flex-direction:column;align-items:flex-end;">
                                        <div class="col-xs-12 type-success align-items-center justify-content-between" aria-hidden="false" role="alert" ng-class="{'preview-screen':!mtoMaintCtrl.publishResponseMessage, 'publish-screen':mtoMaintCtrl.publishResponseMessage}">
                                            <div class="d-flex align-items-center" data-ng-if="!mtoMaintCtrl.publishResponseMessage">
                                                <div class="rc-alert-icon">
                                                    <span class=" zmdi zmdi-globe text-info" style="font-size:35px">
                                                    </span>
                                                </div>
                                                <div style="flex:1;">
                                                    <div class="f-14 f-700">Review and Publish</div>
                                                    <div>
                                                        <span class="text-muted">
                                                            <div class="list-style-none" style="line-height: 1.7;">
                                                                <li>
                                                                    <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                    <span class="">
                                                                        <strong>Preview and Publish :</strong> Publish the entered/configured
                                                                        details
                                                                    </span>
                                                                </li>
                                                            </div>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Section to show the response of the published data start -->
                                            <div class="col-xs-12 p-0" data-ng-if="mtoMaintCtrl.publishResponseMessage">
                                                <div class="col-xs-12 p-0 col-xs-12 justify-content-between p-0">
                                                    <div class="col-xs-12 col-lg-9 p-0">
                                                        <div class="d-flex align-items-center">
                                                            <span class="rc-alert-icon">
                                                                <span class=" zmdi zmdi-globe text-info" style="font-size:35px">
                                                                </span>
                                                            </span>
                                                            <div data-ng-if="mtoMaintCtrl.isProcessing">
                                                                <i class="zmdi zmdi-hourglass-alt"></i> ...
                                                            </div>
                                                            <span class="f-14 f-700 text-success" data-ng-if="!mtoMaintCtrl.isProcessing && mtoSuccessMessage">
                                                                <span>MTO Option
                                                                </span> Updated
                                                            </span>
                                                            <div data-ng-if="!mtoMaintCtrl.isProcessing">
                                                                <span class="f-14 f-700 c-firebrick" data-ng-if="mtoMaintCtrl.validationError && !mtoSuccessMessage">Error while updating the MTO Option</span>
                                                            </div>
                                                        </div>
                                                        <div style="padding-left:40px;" data-ng-if="!mtoMaintCtrl.isProcessing">
                                                            <div class="message-section success d-flex-v-center" data-ng-if="mtoSuccessMessage">
                                                                <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                <span class="message-info">{{mtoSuccessMessage}}</span>
                                                            </div>
                                                            <div class="message-section success d-flex-v-center" data-ng-if="mtoUDDSuccessMessage">
                                                                <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                <span class="message-info">{{mtoUDDSuccessMessage}}</span>
                                                            </div>
                                                            <div class="message-section error d-flex-v-center" data-ng-if="mtoMaintCtrl.validationError && mtoMaintCtrl.validationError.length>0"
                                                                data-ng-repeat="error in mtoMaintCtrl.validationError">
                                                                <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                <span class="message-info">{{error}}</span>
                                                            </div>
                                                            <div class="message-section error d-flex-v-center" data-ng-if="mtoErrorMessage">
                                                                <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                <span class="message-info">{{mtoErrorMessage}}</span>
                                                            </div>
                                                            <span class="message-section" data-ng-if="mtoMaintCtrl.validationError && !mtoSuccessMessage">
                                                                <span class="zmdi zmdi-chevron-right f-16 f-700 m-r-5"></span>
                                                                Will you go back and review your setup?
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-xs-12 m-t-10" data-ng-if="!mtoMaintCtrl.isProcessing">
                                                        <div class="pull-right d-flex p-0 d-flex-h-center">
                                                            <button type="button" class="btn btn-inverse f-300 waves-effect f-15 p-10" data-ng-click="mtoMaintCtrl.closeForm();mtoMaintCtrl.reloadOptionCountAndList(true);">Finish</button>
                                                            <button type="button" class="btn btn-cancel f-300 waves-effect f-15 m-l-5 p-10" data-ng-if="mtoMaintCtrl.validationError && !mtoSuccessMessage"
                                                                data-ng-click="mtoMaintCtrl.backFn('dropScreen');mtoMaintCtrl.publishResponseMessage=false;">Go Back</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Section to show the response of the published data end -->
                                            <div class="d-flex align-items-center" style="justify-content:space-between" data-ng-if="!mtoMaintCtrl.publishResponseMessage">
                                                <div class="pull-right d-flex">
                                                    <button type="button" class="btn btn-lg btn-inverse f-700 waves-effect" data-ng-click="mtoMaintCtrl.backFn('previewandpublish');"
                                                        data-ng-if="mtoMaintCtrl.previewAndPublish">Back</button>
                                                    <button type="button" class="btn btn-lg btn-success f-700 m-l-5 waves-effect" data-ng-click="mtoMaintCtrl.publishMTO(mtoMaintCtrl.mtooption);">Publish {{moduleName}}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-12 p-0">
                                    <!--BASIC DETAILS PREVIEW -- START-->
                                    <div class="col-xs-12 col-md-6">
                                        <div class="col-lg-12 p-0">
                                            <div class="col-xs-12 f-16 panel-header">
                                                <span class="f-700" style="color:darkgray;">
                                                    MTO Option Details
                                                </span>
                                            </div>
                                            <div class="col-xs-12 p-t-10 card previewnpublish f-13">
                                                <div class="col-xs-12 form-group">
                                                    <label class="panel-body-label">Description</label>
                                                    <div class="description-data">
                                                        <label class="m-0 p-0">
                                                            {{mtoMaintCtrl.mtooption.description}}
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12">
                                                    <label class="panel-body-label">Option Type</label>
                                                    <div class="description-data">
                                                        <label class="m-0 p-0">
                                                            <select name="option_type" class="dropdown-to-label" ng-options="each.id as (each.short_description+' : '+each.status) disable when (each.status_id !== 200)  for each in mtoMaintCtrl.allMTOTypes"
                                                                ng-model="mtoMaintCtrl.mtooption.option_type_id" disabled>
                                                            </select>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12 p-t-10">
                                                    <label class="panel-body-label">Vendor</label>
                                                    <div class="description-data p-0">
                                                        <label class="m-0 p-0">
                                                            <select selectize="selectVendorConfiguration" items="head.vendor" name="mto_vendor" class="form-control select-component input-sm"
                                                                options="mtoMaintCtrl.allVendors" ng-model="mtoMaintCtrl.mtooption.vendor.id"
                                                                disabled>
                                                            </select>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 p-t-10 p-0 form-group">
                                                    <div class="col-xs-6">
                                                        <label class="panel-body-label">Current Status</label>
                                                        <div class="description-data">
                                                            <label class="m-0 p-0">
                                                                <select class="dropdown-to-label" ng-options="each.code as each.description for each in statuses" ng-model="mtoMaintCtrl.mtooption.status_id"
                                                                    disabled></select>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 form-group">
                                                        <label class="panel-body-label">Effective Date</label>
                                                        <div class="description-data">
                                                            <label class="m-0 p-0">
                                                                {{mtoMaintCtrl.mtooption.effective_date}}
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--BASIC DETAILS PREVIEW -- END-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Div for preview and publish item stage end-->
                </div>
            </div>
            <!--Available screens in item update LINK start-->
            <div id="fixed-side-navigation">
                <div class="fixed-side-panel">
                    <div>
                        <ul class="p-0">
                            <li data-ng-class="{'active-navigation' : mtoMaintCtrl.createForm}">
                                <a href="" data-ng-click="mtoMaintCtrl.goToScreen('createform')">
                                    <span>MTO Option Master Configuration</span>
                                </a>
                            </li>
                            <li data-ng-class="{'active-navigation' : mtoMaintCtrl.manageDropScreen}">
                                <a href="" data-ng-click="mtoMaintCtrl.goToScreen('dropscreen')">
                                    <span>Document Configuration</span>
                                </a>
                            </li>
                            <li data-ng-class="{'active-navigation' : mtoMaintCtrl.previewAndPublish}">
                                <a href="" data-ng-click="mtoMaintCtrl.goToScreen('publishscreen')">
                                    <span>Review and Publish</span>
                                </a>
                            </li>
                            <li class="p-5" title="Publish Changes" title-direction="left" style="background:#fff1d4">
                                <button class="btn btn-block f-13 bgm-ocean center-block" data-ng-click="mtoMaintCtrl.publishMTO(mtoMaintCtrl.mtooption, true)"
                                    style="border: 1px dotted;">
                                    <span>Publish Changes</span>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--Available screens in item update LINK end-->
        </div>
    </div>
    <div ui-view></div>
    <meta-data-panel></meta-data-panel>
    <div id="rcrightsidebar" data-ng-class="{'changeposition': mtoMaintCtrl.showDependencyDetails === true || showHistory === true,'toggled':mtoMaintCtrl.showDependencyDetailsData === true}">
        <div class="col-xs-12 m-t-25">
            <div class="col-xs-3 p-0">
                <a data-ng-click="mtoMaintCtrl.showDependencyDetailsData=false;mtoMaintCtrl.showDependencyDetails = false;mtoMaintCtrl.$confirmdelete = false; mtoMaintCtrl.isLoadingDelete = false"
                    class="cursor-pointer">
                    <span class="zmdi zmdi-long-arrow-right zmdi-hc-fw zmdi-hc-3x"></span>
                </a>
            </div>
            <div class="col-xs-9 p-0">
                <label class="rclabel editformlabel" title="{{mtoMaintCtrl.moduleName}}">
                    <strong>MTO</strong> Dependency</label>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="d-flex m-b-10 m-t-10">
                <div class="m-auto updatepanel">
                    <div data-ng-include="'./img/sidebar-icons/entity-config-made-to-order.svg'"></div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="rc-alert rc-alert-error" aria-hidden="false" role="alert">
                    <div class="rc-alert-icon-section">
                        <span class="zmdi zmdi-alert-polygon">
                        </span>
                    </div>
                    <div class="rc-alert-content-section">
                        <div class="rc-alert-header">Dependency Check - Action can not be completed</div>
                        <div class="rc-alert-body">
                            <span>
                                Before deleting we checked and found some entities are still linked to choice.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-12" ng-repeat="($groupName,$dependencyMain) in ( mtoMaintCtrl.dependencyList | groupBy : 'dependent_entity')">
                <h4> Dependent Entities - {{$groupName}} </h4>
                <div class="rcpscrollbar dependency-entityBox">
                    <div class="col-xs-12 p-0" data-ng-repeat="dependency in $dependencyMain">
                        <div class="dependency-entityList" ng-click="mtoMaintCtrl.showDependencyListDetails(dependency);">
                            <span ng-if="dependency.dependent_entity === 'Mto Choice'" title="{{dependency.choice_description}}">
                                {{dependency.choice_description | truncate:50}}
                            </span>
                            <span ng-if="dependency.dependent_entity === 'Item Type UDD'" title="{{dependency.item_type_name}}">
                                {{dependency.item_type_name | truncate:50}}
                            </span>
                            <span ng-if="dependency.dependent_entity === 'Sku Option Details'" title="{{dependency.description}}">
                                {{dependency.description | truncate:50}}
                            </span>
                            <span class="zmdi zmdi-long-arrow-right zmdi-hc-fw pull-right zmdi-hc-border-circle"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group pull-right p-10">
                <button class="btn btn-secondary" ng-click="mtoMaintCtrl.showDependencyDetailsData=false;mtoMaintCtrl.showDependencyDetails = false;mtoMaintCtrl.$confirmdelete = false;mtoMaintCtrl.isLoadingDelete = false">
                    <span>
                        <b>Cancel</b>
                    </span>
                </button>
            </div>
        </div>
        <div data-ng-include="'./application/modules/mto/option/panel.mto.dependency.html'"></div>
    </div>
</div>
